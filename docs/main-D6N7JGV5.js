import{$a as se,B as bs,F as Rs,G as Ps,H as ks,Ha as Fs,Sa as Us,Ta as qs,Ua as Bs,Va as js,Wa as Tr,Xa as Ct,Ya as wr,Za as $s,_a as Ar,a as kt,aa as Er,ab as zs,b as Is,bb as Ws,c as vs,cb as Gs,d as yr,db as Ks,e as Ir,eb as Sr,f as vr,fb as Nt,ga as Cs,gb as Je,ha as Ns,hb as br,i as Es,ia as Ds,ib as Rr,j as Ts,ja as Os,jb as Hs,k as ws,ka as Vs,kb as Ve,l as dn,lb as Ae,mb as xe,n as te,nb as Xe,o as fn,ob as Se,p as As,pa as xs,pb as gn,q as pn,qa as Ls,qb as pe,ra as Ms,rb as Ze,sb as Qs,t as Ye,tb as et,u as mn,ub as _n,v as Te,vb as H,w as Ss,wb as Ys,xb as Js,y as we,yb as Xs}from"./chunk-GCJVCZXR.js";import"./chunk-SPJVW25W.js";import"./chunk-BAGTANMR.js";import"./chunk-JLY5DFWC.js";import"./chunk-QRP5O525.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{g as A}from"./chunk-2R6CW7ES.js";function Zs(r){r===void 0&&(r=te(Ye));let e=r.get(mn);return n=>new kt(s=>{let a=e.add(),u=!1;function f(){u||(a(),u=!0)}let I=n.subscribe({next:E=>{s.next(E),f()},complete:()=>{s.complete(),f()},error:E=>{s.error(E),f()}});return I.add(()=>{s.unsubscribe(),f()}),I})}var Me=new Es("ANGULARFIRE2_VERSION");function In(r,e,n){if(e){if(e.length===1)return e[0];let u=e.filter(f=>f.app===n);if(u.length===1)return u[0]}return n.container.getProvider(r).getImmediate({optional:!0})}var nt=(r,e)=>{let n=e?[e]:_n(),s=[];return n.forEach(a=>{a.container.getProvider(r).instances.forEach(f=>{s.includes(f)||s.push(f)})}),s},tt=(function(r){return r[r.SILENT=0]="SILENT",r[r.WARN=1]="WARN",r[r.VERBOSE=2]="VERBOSE",r})(tt||{}),eo=Er()&&typeof Zone<"u"?tt.WARN:tt.SILENT;var yn=class{zone;delegate;constructor(e,n=vs){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,s){let a=this.zone,u=function(f){a?a.runGuarded(()=>{e.apply(this,[f])}):e.apply(this,[f])};return this.delegate.schedule(u,n,s)}},Fe=(()=>{class r{outsideAngular;insideAngular;constructor(){let n=te(we);this.outsideAngular=n.runOutsideAngular(()=>new yn(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new yn(typeof Zone>"u"?void 0:Zone.current,Is))}static \u0275fac=function(s){return new(s||r)};static \u0275prov=ws({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),to=!1;function dc(r,e){!to&&(eo>tt.SILENT||Er())&&(to=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),eo>=e&&console.warn(`Firebase API called outside injection context: ${r.name}`)}function fc(r){let e=te(we,{optional:!0});return e?e.runOutsideAngular(()=>r()):r()}function Le(r){let e=te(we,{optional:!0});return e?e.run(()=>r()):r()}var pc=(r,e,n)=>(...s)=>(e&&setTimeout(e,0),pn(n,()=>Le(()=>r.apply(void 0,s)))),rt=(r,e,n)=>(n||=e?tt.WARN:tt.VERBOSE,function(){let s,a=arguments,u,f,I;try{u=te(Fe),f=te(mn),I=te(As)}catch{return dc(r,n),r.apply(this,a)}for(let T=0;T<arguments.length;T++)typeof a[T]=="function"&&(e&&(s||=Le(()=>f.add())),a[T]=pc(a[T],s,I));let E=fc(()=>r.apply(this,a));return e?E instanceof kt?E.pipe(vr(u.outsideAngular),Ir(u.insideAngular),Zs(I)):E instanceof Promise?Le(()=>{let T=f.add();return new Promise((S,O)=>{E.then(b=>pn(I,()=>Le(()=>S(b))),b=>pn(I,()=>Le(()=>O(b)))).finally(T)})}):typeof E=="function"&&s?function(){return setTimeout(s,0),E.apply(this,arguments)}:Le(()=>E):E instanceof kt?E.pipe(vr(u.outsideAngular),Ir(u.insideAngular)):Le(()=>E)});var Ue=class{constructor(e){return e}},Dt=class{constructor(){return _n()}};function mc(r){return r&&r.length===1?r[0]:new Ue(et())}var Pr=new dn("angularfire2._apps"),gc={provide:Ue,useFactory:mc,deps:[[new Te,Pr]]},_c={provide:Dt,deps:[[new Te,Pr]]};function yc(r){return(e,n)=>{let s=n.get(Ss);H("angularfire",Me.full,"core"),H("angularfire",Me.full,"app"),H("angular",Ts.full,s.toString());let a=e.runOutsideAngular(()=>r(n));return new Ue(a)}}function no(r,...e){return fn([gc,_c,{provide:Pr,useFactory:yc(r),multi:!0,deps:[we,Ye,Fe,...e]}])}var ro=rt(Qs,!0);var vc=new Map,Ec={activated:!1,tokenObservers:[]},Tc={initialized:!1,enabled:!1};function oe(r){return vc.get(r)||Object.assign({},Ec)}function ao(){return Tc}var wc="https://content-firebaseappcheck.googleapis.com/v1";var Ac="exchangeDebugToken",io={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Wh=1440*60*1e3;var Nr=class{constructor(e,n,s,a,u){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=a,a>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return A(this,null,function*(){this.stop();try{this.pending=new Tr,this.pending.promise.catch(n=>{}),yield Sc(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Tr,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Sc(r){return new Promise(e=>{setTimeout(e,r)})}var bc={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},be=new Je("appCheck","AppCheck",bc);function co(r){if(!oe(r).activated)throw be.create("use-before-activation",{appName:r.name})}function uo(s,a){return A(this,arguments,function*({url:r,body:e},n){let u={"Content-Type":"application/json"},f=n.getImmediate({optional:!0});if(f){let x=yield f.getHeartbeatsHeader();x&&(u["X-Firebase-Client"]=x)}let I={method:"POST",body:JSON.stringify(e),headers:u},E;try{E=yield fetch(r,I)}catch(x){throw be.create("fetch-network-error",{originalErrorMessage:x?.message})}if(E.status!==200)throw be.create("fetch-status-error",{httpStatus:E.status});let T;try{T=yield E.json()}catch(x){throw be.create("fetch-parse-error",{originalErrorMessage:x?.message})}let S=T.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw be.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${T.ttl}`});let O=Number(S[1])*1e3,b=Date.now();return{token:T.token,expireTimeMillis:b+O,issuedAtTimeMillis:b}})}function lo(r,e){let{projectId:n,appId:s,apiKey:a}=r.options;return{url:`${wc}/projects/${n}/apps/${s}:${Ac}?key=${a}`,body:{debug_token:e}}}var Rc="firebase-app-check-database",Pc=1,Dr="firebase-app-check-store";var vn=null;function kc(){return vn||(vn=new Promise((r,e)=>{try{let n=indexedDB.open(Rc,Pc);n.onsuccess=s=>{r(s.target.result)},n.onerror=s=>{var a;e(be.create("storage-open",{originalErrorMessage:(a=s.target.error)===null||a===void 0?void 0:a.message}))},n.onupgradeneeded=s=>{let a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(Dr,{keyPath:"compositeKey"})}}}catch(n){e(be.create("storage-open",{originalErrorMessage:n?.message}))}}),vn)}function Cc(r,e){return Nc(Dc(r),e)}function Nc(r,e){return A(this,null,function*(){let s=(yield kc()).transaction(Dr,"readwrite"),u=s.objectStore(Dr).put({compositeKey:r,value:e});return new Promise((f,I)=>{u.onsuccess=E=>{f()},s.onerror=E=>{var T;I(be.create("storage-set",{originalErrorMessage:(T=E.target.error)===null||T===void 0?void 0:T.message}))}})})}function Dc(r){return`${r.options.appId}-${r.name}`}var Ot=new Xe("@firebase/app-check");function kr(r,e){return Sr()?Cc(r,e).catch(n=>{Ot.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function ho(){return ao().enabled}function fo(){return A(this,null,function*(){let r=ao();if(r.enabled&&r.token)return r.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Oc={error:"UNKNOWN_ERROR"};function Vc(r){return Us.encodeString(JSON.stringify(r),!1)}function Or(r,e=!1,n=!1){return A(this,null,function*(){let s=r.app;co(s);let a=oe(s),u=a.token,f;if(u&&!Vt(u)&&(a.token=void 0,u=void 0),!u){let T=yield a.cachedTokenPromise;T&&(Vt(T)?u=T:yield kr(s,void 0))}if(!e&&u&&Vt(u))return{token:u.token};let I=!1;if(ho())try{a.exchangeTokenPromise||(a.exchangeTokenPromise=uo(lo(s,yield fo()),r.heartbeatServiceProvider).finally(()=>{a.exchangeTokenPromise=void 0}),I=!0);let T=yield a.exchangeTokenPromise;return yield kr(s,T),a.token=T,{token:T.token}}catch(T){return T.code==="appCheck/throttled"||T.code==="appCheck/initial-throttle"?Ot.warn(T.message):n&&Ot.error(T),Cr(T)}try{a.exchangeTokenPromise||(a.exchangeTokenPromise=a.provider.getToken().finally(()=>{a.exchangeTokenPromise=void 0}),I=!0),u=yield oe(s).exchangeTokenPromise}catch(T){T.code==="appCheck/throttled"||T.code==="appCheck/initial-throttle"?Ot.warn(T.message):n&&Ot.error(T),f=T}let E;return u?f?Vt(u)?E={token:u.token,internalError:f}:E=Cr(f):(E={token:u.token},a.token=u,yield kr(s,u)):E=Cr(f),I&&Fc(s,E),E})}function xc(r){return A(this,null,function*(){let e=r.app;co(e);let{provider:n}=oe(e);if(ho()){let s=yield fo(),{token:a}=yield uo(lo(e,s),r.heartbeatServiceProvider);return{token:a}}else{let{token:s}=yield n.getToken();return{token:s}}})}function Lc(r,e,n,s){let{app:a}=r,u=oe(a),f={next:n,error:s,type:e};if(u.tokenObservers=[...u.tokenObservers,f],u.token&&Vt(u.token)){let I=u.token;Promise.resolve().then(()=>{n({token:I.token}),so(r)}).catch(()=>{})}u.cachedTokenPromise.then(()=>so(r))}function po(r,e){let n=oe(r),s=n.tokenObservers.filter(a=>a.next!==e);s.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=s}function so(r){let{app:e}=r,n=oe(e),s=n.tokenRefresher;s||(s=Mc(r),n.tokenRefresher=s),!s.isRunning()&&n.isTokenAutoRefreshEnabled&&s.start()}function Mc(r){let{app:e}=r;return new Nr(()=>A(null,null,function*(){let n=oe(e),s;if(n.token?s=yield Or(r,!0):s=yield Or(r),s.error)throw s.error;if(s.internalError)throw s.internalError}),()=>!0,()=>{let n=oe(e);if(n.token){let s=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,a=n.token.expireTimeMillis-300*1e3;return s=Math.min(s,a),Math.max(0,s-Date.now())}else return 0},io.RETRIAL_MIN_WAIT,io.RETRIAL_MAX_WAIT)}function Fc(r,e){let n=oe(r).tokenObservers;for(let s of n)try{s.type==="EXTERNAL"&&e.error!=null?s.error(e.error):s.next(e)}catch{}}function Vt(r){return r.expireTimeMillis-Date.now()>0}function Cr(r){return{token:Vc(Oc),error:r}}var Vr=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=oe(this.app);for(let n of e)po(this.app,n.next);return Promise.resolve()}};function Uc(r,e){return new Vr(r,e)}function qc(r){return{getToken:e=>Or(r,e),getLimitedUseToken:()=>xc(r),addTokenListener:e=>Lc(r,"INTERNAL",e),removeTokenListener:e=>po(r.app,e)}}var Bc="@firebase/app-check",jc="0.10.1";var $c="app-check",oo="app-check-internal";function zc(){Se(new Ae($c,r=>{let e=r.getProvider("app").getImmediate(),n=r.getProvider("heartbeat");return Uc(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,e,n)=>{r.getProvider(oo).initialize()})),Se(new Ae(oo,r=>{let e=r.getProvider("app-check").getImmediate();return qc(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),H(Bc,jc)}zc();var Wc="app-check";var En=class{constructor(){return nt(Wc)}};var Gc=["localhost","0.0.0.0","127.0.0.1"],id=typeof window<"u"&&Gc.includes(window.location.hostname);function To(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wo=To,Ao=new Je("auth","Firebase",To());var Sn=new Xe("@firebase/auth");function Hc(r,...e){Sn.logLevel<=xe.WARN&&Sn.warn(`Auth (${Ze}): ${r}`,...e)}function wn(r,...e){Sn.logLevel<=xe.ERROR&&Sn.error(`Auth (${Ze}): ${r}`,...e)}function mo(r,...e){throw Gr(r,...e)}function Wr(r,...e){return Gr(r,...e)}function So(r,e,n){let s=Object.assign(Object.assign({},wo()),{[e]:n});return new Je("auth","Firebase",s).create(e,{appName:r.name})}function An(r){return So(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gr(r,...e){if(typeof r!="string"){let n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return Ao.create(r,...e)}function N(r,e,...n){if(!r)throw Gr(e,...n)}function xt(r){let e="INTERNAL ASSERTION FAILED: "+r;throw wn(e),new Error(e)}function bn(r,e){r||xt(e)}function Qc(){return go()==="http:"||go()==="https:"}function go(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}function Yc(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qc()||Gs()||"connection"in navigator)?navigator.onLine:!0}function Jc(){if(typeof navigator>"u")return null;let r=navigator;return r.languages&&r.languages[0]||r.language||null}var je=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,bn(n>e,"Short delay should be less than long delay!"),this.isMobile=zs()||Ks()}get(){return Yc()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Xc(r,e){bn(r.emulator,"Emulator should always be set here");let{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Rn=class{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Zc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eu=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tu=new je(3e4,6e4);function bo(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}function Dn(u,f,I,E){return A(this,arguments,function*(r,e,n,s,a={}){return Ro(r,a,()=>A(null,null,function*(){let T={},S={};s&&(e==="GET"?S=s:T={body:JSON.stringify(s)});let O=Rr(Object.assign({key:r.config.apiKey},S)).slice(1),b=yield r._getAdditionalHeaders();b["Content-Type"]="application/json",r.languageCode&&(b["X-Firebase-Locale"]=r.languageCode);let x=Object.assign({method:e,headers:b},T);return Ws()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&Ct(r.emulatorConfig.host)&&(x.credentials="include"),Rn.fetch()(yield Po(r,r.config.apiHost,n,O),x)}))})}function Ro(r,e,n){return A(this,null,function*(){r._canInitEmulator=!1;let s=Object.assign(Object.assign({},Zc),e);try{let a=new Mr(r),u=yield Promise.race([n(),a.promise]);a.clearNetworkTimeout();let f=yield u.json();if("needConfirmation"in f)throw Tn(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{let I=u.ok?f.errorMessage:f.error.message,[E,T]=I.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tn(r,"credential-already-in-use",f);if(E==="EMAIL_EXISTS")throw Tn(r,"email-already-in-use",f);if(E==="USER_DISABLED")throw Tn(r,"user-disabled",f);let S=s[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw So(r,S,T);mo(r,S)}}catch(a){if(a instanceof Nt)throw a;mo(r,"network-request-failed",{message:String(a)})}})}function Po(r,e,n,s){return A(this,null,function*(){let a=`${e}${n}?${s}`,u=r,f=u.config.emulator?Xc(r.config,a):`${r.config.apiScheme}://${a}`;return eu.includes(n)&&(yield u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f})}var Mr=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Wr(this.auth,"network-request-failed")),tu.get())})}};function Tn(r,e,n){let s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);let a=Wr(r,e,s);return a.customData._tokenResponse=n,a}function nu(r,e){return A(this,null,function*(){return Dn(r,"POST","/v1/accounts:delete",e)})}function Pn(r,e){return A(this,null,function*(){return Dn(r,"POST","/v1/accounts:lookup",e)})}function Lt(r){if(r)try{let e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Kr(r,e=!1){return A(this,null,function*(){let n=Ve(r),s=yield n.getIdToken(e),a=ko(s);N(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");let u=typeof a.firebase=="object"?a.firebase:void 0,f=u?.sign_in_provider;return{claims:a,token:s,authTime:Lt(xr(a.auth_time)),issuedAtTime:Lt(xr(a.iat)),expirationTime:Lt(xr(a.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}})}function xr(r){return Number(r)*1e3}function ko(r){let[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return wn("JWT malformed, contained fewer than 3 sections"),null;try{let a=qs(n);return a?JSON.parse(a):(wn("Failed to decode base64 JWT payload"),null)}catch(a){return wn("Caught error parsing JWT payload as JSON",a?.toString()),null}}function _o(r){let e=ko(r);return N(e,"internal-error"),N(typeof e.exp<"u","internal-error"),N(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Fr(r,e,n=!1){return A(this,null,function*(){if(n)return e;try{return yield e}catch(s){throw s instanceof Nt&&ru(s)&&r.auth.currentUser===r&&(yield r.auth.signOut()),s}})}function ru({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}var Ur=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;let a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>A(this,null,function*(){yield this.iteration()}),n)}iteration(){return A(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ft=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lt(this.lastLoginAt),this.creationTime=Lt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function kn(r){return A(this,null,function*(){var e;let n=r.auth,s=yield r.getIdToken(),a=yield Fr(r,Pn(n,{idToken:s}));N(a?.users.length,n,"internal-error");let u=a.users[0];r._notifyReloadListener(u);let f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Co(u.providerUserInfo):[],I=iu(r.providerData,f),E=r.isAnonymous,T=!(r.email&&u.passwordHash)&&!I?.length,S=E?T:!1,O={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:I,metadata:new Ft(u.createdAt,u.lastLoginAt),isAnonymous:S};Object.assign(r,O)})}function Hr(r){return A(this,null,function*(){let e=Ve(r);yield kn(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function iu(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function Co(r){return r.map(e=>{var{providerId:n}=e,s=yr(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}function su(r,e){return A(this,null,function*(){let n=yield Ro(r,{},()=>A(null,null,function*(){let s=Rr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:u}=r.config,f=yield Po(r,a,"/v1/token",`key=${u}`),I=yield r._getAdditionalHeaders();I["Content-Type"]="application/x-www-form-urlencoded";let E={method:"POST",headers:I,body:s};return r.emulatorConfig&&Ct(r.emulatorConfig.host)&&(E.credentials="include"),Rn.fetch()(f,E)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function ou(r,e){return A(this,null,function*(){return Dn(r,"POST","/v2/accounts:revokeToken",bo(r,e))})}var Mt=class r{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){N(e.idToken,"internal-error"),N(typeof e.idToken<"u","internal-error"),N(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_o(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){N(e.length!==0,"internal-error");let n=_o(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return A(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(N(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return A(this,null,function*(){let{accessToken:s,refreshToken:a,expiresIn:u}=yield su(e,n);this.updateTokensAndExpiration(s,a,Number(u))})}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){let{refreshToken:s,accessToken:a,expirationTime:u}=n,f=new r;return s&&(N(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),a&&(N(typeof a=="string","internal-error",{appName:e}),f.accessToken=a),u&&(N(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new r,this.toJSON())}_performRefresh(){return xt("not implemented")}};function Re(r,e){N(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}var qe=class r{constructor(e){var{uid:n,auth:s,stsTokenManager:a}=e,u=yr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ur(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Ft(u.createdAt||void 0,u.lastLoginAt||void 0)}getIdToken(e){return A(this,null,function*(){let n=yield Fr(this,this.stsTokenManager.getToken(this.auth,e));return N(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Kr(this,e)}reload(){return Hr(this)}_assign(e){this!==e&&(N(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){N(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return A(this,null,function*(){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&(yield kn(this)),yield this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)})}delete(){return A(this,null,function*(){if(pe(this.auth.app))return Promise.reject(An(this.auth));let e=yield this.getIdToken();return yield Fr(this,nu(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,a,u,f,I,E,T,S;let O=(s=n.displayName)!==null&&s!==void 0?s:void 0,b=(a=n.email)!==null&&a!==void 0?a:void 0,x=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,D=(f=n.photoURL)!==null&&f!==void 0?f:void 0,q=(I=n.tenantId)!==null&&I!==void 0?I:void 0,M=(E=n._redirectEventId)!==null&&E!==void 0?E:void 0,le=(T=n.createdAt)!==null&&T!==void 0?T:void 0,Z=(S=n.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:$,emailVerified:re,isAnonymous:ke,providerData:J,stsTokenManager:_}=n;N($&&_,e,"internal-error");let l=Mt.fromJSON(this.name,_);N(typeof $=="string",e,"internal-error"),Re(O,e.name),Re(b,e.name),N(typeof re=="boolean",e,"internal-error"),N(typeof ke=="boolean",e,"internal-error"),Re(x,e.name),Re(D,e.name),Re(q,e.name),Re(M,e.name),Re(le,e.name),Re(Z,e.name);let d=new r({uid:$,auth:e,email:b,emailVerified:re,displayName:O,isAnonymous:ke,photoURL:D,phoneNumber:x,tenantId:q,stsTokenManager:l,createdAt:le,lastLoginAt:Z});return J&&Array.isArray(J)&&(d.providerData=J.map(p=>Object.assign({},p))),M&&(d._redirectEventId=M),d}static _fromIdTokenResponse(e,n,s=!1){return A(this,null,function*(){let a=new Mt;a.updateFromServerResponse(n);let u=new r({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:s});return yield kn(u),u})}static _fromGetAccountInfoResponse(e,n,s){return A(this,null,function*(){let a=n.users[0];N(a.localId!==void 0,"internal-error");let u=a.providerUserInfo!==void 0?Co(a.providerUserInfo):[],f=!(a.email&&a.passwordHash)&&!u?.length,I=new Mt;I.updateFromIdToken(s);let E=new r({uid:a.localId,auth:e,stsTokenManager:I,isAnonymous:f}),T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Ft(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!u?.length};return Object.assign(E,T),E})}};var yo=new Map;function Be(r){bn(r instanceof Function,"Expected a class definition");let e=yo.get(r);return e?(bn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,yo.set(r,e),e)}var au=(()=>{class r{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return A(this,null,function*(){return!0})}_set(n,s){return A(this,null,function*(){this.storage[n]=s})}_get(n){return A(this,null,function*(){let s=this.storage[n];return s===void 0?null:s})}_remove(n){return A(this,null,function*(){delete this.storage[n]})}_addListener(n,s){}_removeListener(n,s){}}return r.type="NONE",r})(),qr=au;function Lr(r,e,n){return`firebase:${r}:${e}:${n}`}var Cn=class r{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;let{config:a,name:u}=this.auth;this.fullUserKey=Lr(this.userKey,a.apiKey,u),this.fullPersistenceKey=Lr("persistence",a.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return A(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Pn(this.auth,{idToken:e}).catch(()=>{});return n?qe._fromGetAccountInfoResponse(this.auth,n,e):null}return qe._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return A(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,s="authUser"){return A(this,null,function*(){if(!n.length)return new r(Be(qr),e,s);let a=(yield Promise.all(n.map(T=>A(null,null,function*(){if(yield T._isAvailable())return T})))).filter(T=>T),u=a[0]||Be(qr),f=Lr(s,e.config.apiKey,e.name),I=null;for(let T of n)try{let S=yield T._get(f);if(S){let O;if(typeof S=="string"){let b=yield Pn(e,{idToken:S}).catch(()=>{});if(!b)break;O=yield qe._fromGetAccountInfoResponse(e,b,S)}else O=qe._fromJSON(e,S);T!==u&&(I=O),u=T;break}}catch{}let E=a.filter(T=>T._shouldAllowMigration);return!u._shouldAllowMigration||!E.length?new r(u,e,s):(u=E[0],I&&(yield u._set(f,I.toJSON())),yield Promise.all(n.map(T=>A(null,null,function*(){if(T!==u)try{yield T._remove(f)}catch{}}))),new r(u,e,s))})}};function Io(r){let e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hu(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cu(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fu(e))return"Blackberry";if(pu(e))return"Webos";if(uu(e))return"Safari";if((e.includes("chrome/")||lu(e))&&!e.includes("edge/"))return"Chrome";if(du(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function cu(r=se()){return/firefox\//i.test(r)}function uu(r=se()){let e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lu(r=se()){return/crios\//i.test(r)}function hu(r=se()){return/iemobile/i.test(r)}function du(r=se()){return/android/i.test(r)}function fu(r=se()){return/blackberry/i.test(r)}function pu(r=se()){return/webos/i.test(r)}function No(r,e=[]){let n;switch(r){case"Browser":n=Io(se());break;case"Worker":n=`${Io(se())}-${r}`;break;default:n=r}let s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ze}/${s}`}var Br=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let s=u=>new Promise((f,I)=>{try{let E=e(u);f(E)}catch(E){I(E)}});s.onAbort=n,this.queue.push(s);let a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}runMiddleware(e){return A(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let s of this.queue)yield s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(let a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}})}};function mu(n){return A(this,arguments,function*(r,e={}){return Dn(r,"GET","/v2/passwordPolicy",bo(r,e))})}var gu=6,jr=class{constructor(e){var n,s,a,u;let f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:gu,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,a,u,f,I;let E={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,E),this.validatePasswordCharacterOptions(e,E),E.isValid&&(E.isValid=(n=E.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),E.isValid&&(E.isValid=(s=E.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),E.isValid&&(E.isValid=(a=E.containsLowercaseLetter)!==null&&a!==void 0?a:!0),E.isValid&&(E.isValid=(u=E.containsUppercaseLetter)!==null&&u!==void 0?u:!0),E.isValid&&(E.isValid=(f=E.containsNumericCharacter)!==null&&f!==void 0?f:!0),E.isValid&&(E.isValid=(I=E.containsNonAlphanumericCharacter)!==null&&I!==void 0?I:!0),E}validatePasswordLengthOptions(e,n){let s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,a,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}};var $r=class{constructor(e,n,s,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nn(this),this.idTokenSubscription=new Nn(this),this.beforeStateQueue=new Br(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ao,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Be(n)),this._initializationPromise=this.queue(()=>A(this,null,function*(){var s,a,u;if(!this._deleted&&(this.persistenceManager=yield Cn.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return A(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return A(this,null,function*(){try{let n=yield Pn(this,{idToken:e}),s=yield qe._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return A(this,null,function*(){var n;if(pe(this.app)){let f=this.app.settings.authIdToken;return f?new Promise(I=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(I,I))}):this.directlySetCurrentUser(null)}let s=yield this.assertedPersistence.getCurrentUser(),a=s,u=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,I=a?._redirectEventId,E=yield this.tryRedirectSignIn(e);(!f||f===I)&&E?.user&&(a=E.user,u=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(u)try{yield this.beforeStateQueue.runMiddleware(a)}catch(f){a=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return N(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)})}tryRedirectSignIn(e){return A(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return A(this,null,function*(){try{yield kn(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Jc()}_delete(){return A(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return A(this,null,function*(){if(pe(this.app))return Promise.reject(An(this));let n=e?Ve(e):null;return n&&N(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return A(this,null,function*(){if(!this._deleted)return e&&N(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>A(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return A(this,null,function*(){return pe(this.app)?Promise.reject(An(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return pe(this.app)?Promise.reject(An(this)):this.queue(()=>A(this,null,function*(){yield this.assertedPersistence.setPersistence(Be(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return A(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return A(this,null,function*(){let e=yield mu(this),n=new jr(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Je("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let s=this.onAuthStateChanged(()=>{s(),e()},n)}})}revokeAccessToken(e){return A(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),yield ou(this,s)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return A(this,null,function*(){let s=yield this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return A(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Be(e)||this._popupRedirectResolver;N(n,this,"argument-error"),this.redirectPersistenceManager=yield Cn.create(this,[Be(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return A(this,null,function*(){var n,s;return this._isInitialized&&(yield this.queue(()=>A(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return A(this,null,function*(){if(e===this.currentUser)return this.queue(()=>A(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,a){if(this._deleted)return()=>{};let u=typeof n=="function"?n:n.next.bind(n),f=!1,I=this._isInitialized?Promise.resolve():this._initializationPromise;if(N(I,this,"internal-error"),I.then(()=>{f||u(this.currentUser)}),typeof n=="function"){let E=e.addObserver(n,s,a);return()=>{f=!0,E()}}else{let E=e.addObserver(n);return()=>{f=!0,E()}}}directlySetCurrentUser(e){return A(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return N(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=No(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return A(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let s=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();s&&(n["X-Firebase-Client"]=s);let a=yield this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n})}_getAppCheckToken(){return A(this,null,function*(){var e;if(pe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Hc(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function _u(r){return Ve(r)}var Nn=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hs(n=>this.observer=n)}get next(){return N(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var yu={loadJS(){return A(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Iu(r){yu=r}function vu(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function Eu(r,e){let n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Be);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}var _d=vu("rcb"),yd=new je(3e4,6e4);var Id=new je(2e3,1e4);var vd=600*1e3;var Ed=new je(3e4,6e4);var Td=new je(5e3,15e3);var wd=encodeURIComponent("fac");var vo="@firebase/auth",Eo="1.10.8";var zr=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return A(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){N(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Tu(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wu(r){Se(new Ae("auth",(e,{options:n})=>{let s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:I}=s.options;N(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});let E={apiKey:f,authDomain:I,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:No(r)},T=new $r(s,a,u,E);return Eu(T,n),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Se(new Ae("auth-internal",e=>{let n=_u(e.getProvider("auth").getImmediate());return(s=>new zr(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),H(vo,Eo,Tu(r)),H(vo,Eo,"esm2017")}var Au=300,Ad=js("authIdTokenMaxAge")||Au;function Su(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}Iu({loadJS(r){return new Promise((e,n)=>{let s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{let u=Wr("internal-error");u.customData=a,n(u)},s.type="text/javascript",s.charset="UTF-8",Su().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wu("Browser");var wl="auth";var On=class{constructor(){return nt(wl)}};var Do=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oo={};var Vn,Vo;(function(){var r;function e(_,l){function d(){}d.prototype=l.prototype,_.D=l.prototype,_.prototype=new d,_.prototype.constructor=_,_.C=function(p,m,y){for(var h=Array(arguments.length-2),he=2;he<arguments.length;he++)h[he-2]=arguments[he];return l.prototype[m].apply(p,h)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(_,l,d){d||(d=0);var p=Array(16);if(typeof l=="string")for(var m=0;16>m;++m)p[m]=l.charCodeAt(d++)|l.charCodeAt(d++)<<8|l.charCodeAt(d++)<<16|l.charCodeAt(d++)<<24;else for(m=0;16>m;++m)p[m]=l[d++]|l[d++]<<8|l[d++]<<16|l[d++]<<24;l=_.g[0],d=_.g[1],m=_.g[2];var y=_.g[3],h=l+(y^d&(m^y))+p[0]+3614090360&4294967295;l=d+(h<<7&4294967295|h>>>25),h=y+(m^l&(d^m))+p[1]+3905402710&4294967295,y=l+(h<<12&4294967295|h>>>20),h=m+(d^y&(l^d))+p[2]+606105819&4294967295,m=y+(h<<17&4294967295|h>>>15),h=d+(l^m&(y^l))+p[3]+3250441966&4294967295,d=m+(h<<22&4294967295|h>>>10),h=l+(y^d&(m^y))+p[4]+4118548399&4294967295,l=d+(h<<7&4294967295|h>>>25),h=y+(m^l&(d^m))+p[5]+1200080426&4294967295,y=l+(h<<12&4294967295|h>>>20),h=m+(d^y&(l^d))+p[6]+2821735955&4294967295,m=y+(h<<17&4294967295|h>>>15),h=d+(l^m&(y^l))+p[7]+4249261313&4294967295,d=m+(h<<22&4294967295|h>>>10),h=l+(y^d&(m^y))+p[8]+1770035416&4294967295,l=d+(h<<7&4294967295|h>>>25),h=y+(m^l&(d^m))+p[9]+2336552879&4294967295,y=l+(h<<12&4294967295|h>>>20),h=m+(d^y&(l^d))+p[10]+4294925233&4294967295,m=y+(h<<17&4294967295|h>>>15),h=d+(l^m&(y^l))+p[11]+2304563134&4294967295,d=m+(h<<22&4294967295|h>>>10),h=l+(y^d&(m^y))+p[12]+1804603682&4294967295,l=d+(h<<7&4294967295|h>>>25),h=y+(m^l&(d^m))+p[13]+4254626195&4294967295,y=l+(h<<12&4294967295|h>>>20),h=m+(d^y&(l^d))+p[14]+2792965006&4294967295,m=y+(h<<17&4294967295|h>>>15),h=d+(l^m&(y^l))+p[15]+1236535329&4294967295,d=m+(h<<22&4294967295|h>>>10),h=l+(m^y&(d^m))+p[1]+4129170786&4294967295,l=d+(h<<5&4294967295|h>>>27),h=y+(d^m&(l^d))+p[6]+3225465664&4294967295,y=l+(h<<9&4294967295|h>>>23),h=m+(l^d&(y^l))+p[11]+643717713&4294967295,m=y+(h<<14&4294967295|h>>>18),h=d+(y^l&(m^y))+p[0]+3921069994&4294967295,d=m+(h<<20&4294967295|h>>>12),h=l+(m^y&(d^m))+p[5]+3593408605&4294967295,l=d+(h<<5&4294967295|h>>>27),h=y+(d^m&(l^d))+p[10]+38016083&4294967295,y=l+(h<<9&4294967295|h>>>23),h=m+(l^d&(y^l))+p[15]+3634488961&4294967295,m=y+(h<<14&4294967295|h>>>18),h=d+(y^l&(m^y))+p[4]+3889429448&4294967295,d=m+(h<<20&4294967295|h>>>12),h=l+(m^y&(d^m))+p[9]+568446438&4294967295,l=d+(h<<5&4294967295|h>>>27),h=y+(d^m&(l^d))+p[14]+3275163606&4294967295,y=l+(h<<9&4294967295|h>>>23),h=m+(l^d&(y^l))+p[3]+4107603335&4294967295,m=y+(h<<14&4294967295|h>>>18),h=d+(y^l&(m^y))+p[8]+1163531501&4294967295,d=m+(h<<20&4294967295|h>>>12),h=l+(m^y&(d^m))+p[13]+2850285829&4294967295,l=d+(h<<5&4294967295|h>>>27),h=y+(d^m&(l^d))+p[2]+4243563512&4294967295,y=l+(h<<9&4294967295|h>>>23),h=m+(l^d&(y^l))+p[7]+1735328473&4294967295,m=y+(h<<14&4294967295|h>>>18),h=d+(y^l&(m^y))+p[12]+2368359562&4294967295,d=m+(h<<20&4294967295|h>>>12),h=l+(d^m^y)+p[5]+4294588738&4294967295,l=d+(h<<4&4294967295|h>>>28),h=y+(l^d^m)+p[8]+2272392833&4294967295,y=l+(h<<11&4294967295|h>>>21),h=m+(y^l^d)+p[11]+1839030562&4294967295,m=y+(h<<16&4294967295|h>>>16),h=d+(m^y^l)+p[14]+4259657740&4294967295,d=m+(h<<23&4294967295|h>>>9),h=l+(d^m^y)+p[1]+2763975236&4294967295,l=d+(h<<4&4294967295|h>>>28),h=y+(l^d^m)+p[4]+1272893353&4294967295,y=l+(h<<11&4294967295|h>>>21),h=m+(y^l^d)+p[7]+4139469664&4294967295,m=y+(h<<16&4294967295|h>>>16),h=d+(m^y^l)+p[10]+3200236656&4294967295,d=m+(h<<23&4294967295|h>>>9),h=l+(d^m^y)+p[13]+681279174&4294967295,l=d+(h<<4&4294967295|h>>>28),h=y+(l^d^m)+p[0]+3936430074&4294967295,y=l+(h<<11&4294967295|h>>>21),h=m+(y^l^d)+p[3]+3572445317&4294967295,m=y+(h<<16&4294967295|h>>>16),h=d+(m^y^l)+p[6]+76029189&4294967295,d=m+(h<<23&4294967295|h>>>9),h=l+(d^m^y)+p[9]+3654602809&4294967295,l=d+(h<<4&4294967295|h>>>28),h=y+(l^d^m)+p[12]+3873151461&4294967295,y=l+(h<<11&4294967295|h>>>21),h=m+(y^l^d)+p[15]+530742520&4294967295,m=y+(h<<16&4294967295|h>>>16),h=d+(m^y^l)+p[2]+3299628645&4294967295,d=m+(h<<23&4294967295|h>>>9),h=l+(m^(d|~y))+p[0]+4096336452&4294967295,l=d+(h<<6&4294967295|h>>>26),h=y+(d^(l|~m))+p[7]+1126891415&4294967295,y=l+(h<<10&4294967295|h>>>22),h=m+(l^(y|~d))+p[14]+2878612391&4294967295,m=y+(h<<15&4294967295|h>>>17),h=d+(y^(m|~l))+p[5]+4237533241&4294967295,d=m+(h<<21&4294967295|h>>>11),h=l+(m^(d|~y))+p[12]+1700485571&4294967295,l=d+(h<<6&4294967295|h>>>26),h=y+(d^(l|~m))+p[3]+2399980690&4294967295,y=l+(h<<10&4294967295|h>>>22),h=m+(l^(y|~d))+p[10]+4293915773&4294967295,m=y+(h<<15&4294967295|h>>>17),h=d+(y^(m|~l))+p[1]+2240044497&4294967295,d=m+(h<<21&4294967295|h>>>11),h=l+(m^(d|~y))+p[8]+1873313359&4294967295,l=d+(h<<6&4294967295|h>>>26),h=y+(d^(l|~m))+p[15]+4264355552&4294967295,y=l+(h<<10&4294967295|h>>>22),h=m+(l^(y|~d))+p[6]+2734768916&4294967295,m=y+(h<<15&4294967295|h>>>17),h=d+(y^(m|~l))+p[13]+1309151649&4294967295,d=m+(h<<21&4294967295|h>>>11),h=l+(m^(d|~y))+p[4]+4149444226&4294967295,l=d+(h<<6&4294967295|h>>>26),h=y+(d^(l|~m))+p[11]+3174756917&4294967295,y=l+(h<<10&4294967295|h>>>22),h=m+(l^(y|~d))+p[2]+718787259&4294967295,m=y+(h<<15&4294967295|h>>>17),h=d+(y^(m|~l))+p[9]+3951481745&4294967295,_.g[0]=_.g[0]+l&4294967295,_.g[1]=_.g[1]+(m+(h<<21&4294967295|h>>>11))&4294967295,_.g[2]=_.g[2]+m&4294967295,_.g[3]=_.g[3]+y&4294967295}s.prototype.u=function(_,l){l===void 0&&(l=_.length);for(var d=l-this.blockSize,p=this.B,m=this.h,y=0;y<l;){if(m==0)for(;y<=d;)a(this,_,y),y+=this.blockSize;if(typeof _=="string"){for(;y<l;)if(p[m++]=_.charCodeAt(y++),m==this.blockSize){a(this,p),m=0;break}}else for(;y<l;)if(p[m++]=_[y++],m==this.blockSize){a(this,p),m=0;break}}this.h=m,this.o+=l},s.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var l=1;l<_.length-8;++l)_[l]=0;var d=8*this.o;for(l=_.length-8;l<_.length;++l)_[l]=d&255,d/=256;for(this.u(_),_=Array(16),l=d=0;4>l;++l)for(var p=0;32>p;p+=8)_[d++]=this.g[l]>>>p&255;return _};function u(_,l){var d=I;return Object.prototype.hasOwnProperty.call(d,_)?d[_]:d[_]=l(_)}function f(_,l){this.h=l;for(var d=[],p=!0,m=_.length-1;0<=m;m--){var y=_[m]|0;p&&y==l||(d[m]=y,p=!1)}this.g=d}var I={};function E(_){return-128<=_&&128>_?u(_,function(l){return new f([l|0],0>l?-1:0)}):new f([_|0],0>_?-1:0)}function T(_){if(isNaN(_)||!isFinite(_))return O;if(0>_)return M(T(-_));for(var l=[],d=1,p=0;_>=d;p++)l[p]=_/d|0,d*=4294967296;return new f(l,0)}function S(_,l){if(_.length==0)throw Error("number format error: empty string");if(l=l||10,2>l||36<l)throw Error("radix out of range: "+l);if(_.charAt(0)=="-")return M(S(_.substring(1),l));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var d=T(Math.pow(l,8)),p=O,m=0;m<_.length;m+=8){var y=Math.min(8,_.length-m),h=parseInt(_.substring(m,m+y),l);8>y?(y=T(Math.pow(l,y)),p=p.j(y).add(T(h))):(p=p.j(d),p=p.add(T(h)))}return p}var O=E(0),b=E(1),x=E(16777216);r=f.prototype,r.m=function(){if(q(this))return-M(this).m();for(var _=0,l=1,d=0;d<this.g.length;d++){var p=this.i(d);_+=(0<=p?p:4294967296+p)*l,l*=4294967296}return _},r.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(D(this))return"0";if(q(this))return"-"+M(this).toString(_);for(var l=T(Math.pow(_,6)),d=this,p="";;){var m=re(d,l).g;d=le(d,m.j(l));var y=((0<d.g.length?d.g[0]:d.h)>>>0).toString(_);if(d=m,D(d))return y+p;for(;6>y.length;)y="0"+y;p=y+p}},r.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function D(_){if(_.h!=0)return!1;for(var l=0;l<_.g.length;l++)if(_.g[l]!=0)return!1;return!0}function q(_){return _.h==-1}r.l=function(_){return _=le(this,_),q(_)?-1:D(_)?0:1};function M(_){for(var l=_.g.length,d=[],p=0;p<l;p++)d[p]=~_.g[p];return new f(d,~_.h).add(b)}r.abs=function(){return q(this)?M(this):this},r.add=function(_){for(var l=Math.max(this.g.length,_.g.length),d=[],p=0,m=0;m<=l;m++){var y=p+(this.i(m)&65535)+(_.i(m)&65535),h=(y>>>16)+(this.i(m)>>>16)+(_.i(m)>>>16);p=h>>>16,y&=65535,h&=65535,d[m]=h<<16|y}return new f(d,d[d.length-1]&-2147483648?-1:0)};function le(_,l){return _.add(M(l))}r.j=function(_){if(D(this)||D(_))return O;if(q(this))return q(_)?M(this).j(M(_)):M(M(this).j(_));if(q(_))return M(this.j(M(_)));if(0>this.l(x)&&0>_.l(x))return T(this.m()*_.m());for(var l=this.g.length+_.g.length,d=[],p=0;p<2*l;p++)d[p]=0;for(p=0;p<this.g.length;p++)for(var m=0;m<_.g.length;m++){var y=this.i(p)>>>16,h=this.i(p)&65535,he=_.i(m)>>>16,lt=_.i(m)&65535;d[2*p+2*m]+=h*lt,Z(d,2*p+2*m),d[2*p+2*m+1]+=y*lt,Z(d,2*p+2*m+1),d[2*p+2*m+1]+=h*he,Z(d,2*p+2*m+1),d[2*p+2*m+2]+=y*he,Z(d,2*p+2*m+2)}for(p=0;p<l;p++)d[p]=d[2*p+1]<<16|d[2*p];for(p=l;p<2*l;p++)d[p]=0;return new f(d,0)};function Z(_,l){for(;(_[l]&65535)!=_[l];)_[l+1]+=_[l]>>>16,_[l]&=65535,l++}function $(_,l){this.g=_,this.h=l}function re(_,l){if(D(l))throw Error("division by zero");if(D(_))return new $(O,O);if(q(_))return l=re(M(_),l),new $(M(l.g),M(l.h));if(q(l))return l=re(_,M(l)),new $(M(l.g),l.h);if(30<_.g.length){if(q(_)||q(l))throw Error("slowDivide_ only works with positive integers.");for(var d=b,p=l;0>=p.l(_);)d=ke(d),p=ke(p);var m=J(d,1),y=J(p,1);for(p=J(p,2),d=J(d,2);!D(p);){var h=y.add(p);0>=h.l(_)&&(m=m.add(d),y=h),p=J(p,1),d=J(d,1)}return l=le(_,m.j(l)),new $(m,l)}for(m=O;0<=_.l(l);){for(d=Math.max(1,Math.floor(_.m()/l.m())),p=Math.ceil(Math.log(d)/Math.LN2),p=48>=p?1:Math.pow(2,p-48),y=T(d),h=y.j(l);q(h)||0<h.l(_);)d-=p,y=T(d),h=y.j(l);D(y)&&(y=b),m=m.add(y),_=le(_,h)}return new $(m,_)}r.A=function(_){return re(this,_).h},r.and=function(_){for(var l=Math.max(this.g.length,_.g.length),d=[],p=0;p<l;p++)d[p]=this.i(p)&_.i(p);return new f(d,this.h&_.h)},r.or=function(_){for(var l=Math.max(this.g.length,_.g.length),d=[],p=0;p<l;p++)d[p]=this.i(p)|_.i(p);return new f(d,this.h|_.h)},r.xor=function(_){for(var l=Math.max(this.g.length,_.g.length),d=[],p=0;p<l;p++)d[p]=this.i(p)^_.i(p);return new f(d,this.h^_.h)};function ke(_){for(var l=_.g.length+1,d=[],p=0;p<l;p++)d[p]=_.i(p)<<1|_.i(p-1)>>>31;return new f(d,_.h)}function J(_,l){var d=l>>5;l%=32;for(var p=_.g.length-d,m=[],y=0;y<p;y++)m[y]=0<l?_.i(y+d)>>>l|_.i(y+d+1)<<32-l:_.i(y+d);return new f(m,_.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Vo=Oo.Md5=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=T,f.fromString=S,Vn=Oo.Integer=f}).apply(typeof Do<"u"?Do:typeof self<"u"?self:typeof window<"u"?window:{});var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},me={};var xo,Al,Lo,Mo,Fo,Uo,qo,Bo,jo;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,i,o){return t==Array.prototype||t==Object.prototype||(t[i]=o.value),t};function n(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof xn=="object"&&xn];for(var i=0;i<t.length;++i){var o=t[i];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")}var s=n(this);function a(t,i){if(i)e:{var o=s;t=t.split(".");for(var c=0;c<t.length-1;c++){var g=t[c];if(!(g in o))break e;o=o[g]}t=t[t.length-1],c=o[t],i=i(c),i!=c&&i!=null&&e(o,t,{configurable:!0,writable:!0,value:i})}}function u(t,i){t instanceof String&&(t+="");var o=0,c=!1,g={next:function(){if(!c&&o<t.length){var v=o++;return{value:i(v,t[v]),done:!1}}return c=!0,{done:!0,value:void 0}}};return g[Symbol.iterator]=function(){return g},g}a("Array.prototype.values",function(t){return t||function(){return u(this,function(i,o){return o})}});var f=f||{},I=this||self;function E(t){var i=typeof t;return i=i!="object"?i:t?Array.isArray(t)?"array":i:"null",i=="array"||i=="object"&&typeof t.length=="number"}function T(t){var i=typeof t;return i=="object"&&t!=null||i=="function"}function S(t,i,o){return t.call.apply(t.bind,arguments)}function O(t,i,o){if(!t)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,c),t.apply(i,g)}}return function(){return t.apply(i,arguments)}}function b(t,i,o){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:O,b.apply(null,arguments)}function x(t,i){var o=Array.prototype.slice.call(arguments,1);return function(){var c=o.slice();return c.push.apply(c,arguments),t.apply(this,c)}}function D(t,i){function o(){}o.prototype=i.prototype,t.aa=i.prototype,t.prototype=new o,t.prototype.constructor=t,t.Qb=function(c,g,v){for(var w=Array(arguments.length-2),V=2;V<arguments.length;V++)w[V-2]=arguments[V];return i.prototype[g].apply(c,w)}}function q(t){let i=t.length;if(0<i){let o=Array(i);for(let c=0;c<i;c++)o[c]=t[c];return o}return[]}function M(t,i){for(let o=1;o<arguments.length;o++){let c=arguments[o];if(E(c)){let g=t.length||0,v=c.length||0;t.length=g+v;for(let w=0;w<v;w++)t[g+w]=c[w]}else t.push(c)}}class le{constructor(i,o){this.i=i,this.j=o,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}function Z(t){return/^[\s\xa0]*$/.test(t)}function $(){var t=I.navigator;return t&&(t=t.userAgent)?t:""}function re(t){return re[" "](t),t}re[" "]=function(){};var ke=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function J(t,i,o){for(let c in t)i.call(o,t[c],c,t)}function _(t,i){for(let o in t)i.call(void 0,t[o],o,t)}function l(t){let i={};for(let o in t)i[o]=t[o];return i}let d="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function p(t,i){let o,c;for(let g=1;g<arguments.length;g++){c=arguments[g];for(o in c)t[o]=c[o];for(let v=0;v<d.length;v++)o=d[v],Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o])}}function m(t){var i=1;t=t.split(":");let o=[];for(;0<i&&t.length;)o.push(t.shift()),i--;return t.length&&o.push(t.join(":")),o}function y(t){I.setTimeout(()=>{throw t},0)}function h(){var t=Kn;let i=null;return t.g&&(i=t.g,t.g=t.g.next,t.g||(t.h=null),i.next=null),i}class he{constructor(){this.h=this.g=null}add(i,o){let c=lt.get();c.set(i,o),this.h?this.h.next=c:this.g=c,this.h=c}}var lt=new le(()=>new Na,t=>t.reset());class Na{constructor(){this.next=this.g=this.h=null}set(i,o){this.h=i,this.g=o,this.next=null}reset(){this.next=this.g=this.h=null}}let ht,dt=!1,Kn=new he,yi=()=>{let t=I.Promise.resolve(void 0);ht=()=>{t.then(Da)}};var Da=()=>{for(var t;t=h();){try{t.h.call(t.g)}catch(o){y(o)}var i=lt;i.j(t),100>i.h&&(i.h++,t.next=i.g,i.g=t)}dt=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(t,i){this.type=t,this.g=this.target=i,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var Oa=(function(){if(!I.addEventListener||!Object.defineProperty)return!1;var t=!1,i=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let o=()=>{};I.addEventListener("test",o,i),I.removeEventListener("test",o,i)}catch{}return t})();function ft(t,i){if(z.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var o=this.type=t.type,c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=i,i=t.relatedTarget){if(ke){e:{try{re(i.nodeName);var g=!0;break e}catch{}g=!1}g||(i=null)}}else o=="mouseover"?i=t.fromElement:o=="mouseout"&&(i=t.toElement);this.relatedTarget=i,c?(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Va[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ft.aa.h.call(this)}}D(ft,z);var Va={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),xa=0;function La(t,i,o,c,g){this.listener=t,this.proxy=null,this.src=i,this.type=o,this.capture=!!c,this.ha=g,this.key=++xa,this.da=this.fa=!1}function Ht(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Qt(t){this.src=t,this.g={},this.h=0}Qt.prototype.add=function(t,i,o,c,g){var v=t.toString();t=this.g[v],t||(t=this.g[v]=[],this.h++);var w=Qn(t,i,c,g);return-1<w?(i=t[w],o||(i.fa=!1)):(i=new La(i,this.src,v,!!c,g),i.fa=o,t.push(i)),i};function Hn(t,i){var o=i.type;if(o in t.g){var c=t.g[o],g=Array.prototype.indexOf.call(c,i,void 0),v;(v=0<=g)&&Array.prototype.splice.call(c,g,1),v&&(Ht(i),t.g[o].length==0&&(delete t.g[o],t.h--))}}function Qn(t,i,o,c){for(var g=0;g<t.length;++g){var v=t[g];if(!v.da&&v.listener==i&&v.capture==!!o&&v.ha==c)return g}return-1}var Yn="closure_lm_"+(1e6*Math.random()|0),Jn={};function Ii(t,i,o,c,g){if(c&&c.once)return Ei(t,i,o,c,g);if(Array.isArray(i)){for(var v=0;v<i.length;v++)Ii(t,i[v],o,c,g);return null}return o=tr(o),t&&t[pt]?t.K(i,o,T(c)?!!c.capture:!!c,g):vi(t,i,o,!1,c,g)}function vi(t,i,o,c,g,v){if(!i)throw Error("Invalid event type");var w=T(g)?!!g.capture:!!g,V=Zn(t);if(V||(t[Yn]=V=new Qt(t)),o=V.add(i,o,c,w,v),o.proxy)return o;if(c=Ma(),o.proxy=c,c.src=t,c.listener=o,t.addEventListener)Oa||(g=w),g===void 0&&(g=!1),t.addEventListener(i.toString(),c,g);else if(t.attachEvent)t.attachEvent(wi(i.toString()),c);else if(t.addListener&&t.removeListener)t.addListener(c);else throw Error("addEventListener and attachEvent are unavailable.");return o}function Ma(){function t(o){return i.call(t.src,t.listener,o)}let i=Fa;return t}function Ei(t,i,o,c,g){if(Array.isArray(i)){for(var v=0;v<i.length;v++)Ei(t,i[v],o,c,g);return null}return o=tr(o),t&&t[pt]?t.L(i,o,T(c)?!!c.capture:!!c,g):vi(t,i,o,!0,c,g)}function Ti(t,i,o,c,g){if(Array.isArray(i))for(var v=0;v<i.length;v++)Ti(t,i[v],o,c,g);else c=T(c)?!!c.capture:!!c,o=tr(o),t&&t[pt]?(t=t.i,i=String(i).toString(),i in t.g&&(v=t.g[i],o=Qn(v,o,c,g),-1<o&&(Ht(v[o]),Array.prototype.splice.call(v,o,1),v.length==0&&(delete t.g[i],t.h--)))):t&&(t=Zn(t))&&(i=t.g[i.toString()],t=-1,i&&(t=Qn(i,o,c,g)),(o=-1<t?i[t]:null)&&Xn(o))}function Xn(t){if(typeof t!="number"&&t&&!t.da){var i=t.src;if(i&&i[pt])Hn(i.i,t);else{var o=t.type,c=t.proxy;i.removeEventListener?i.removeEventListener(o,c,t.capture):i.detachEvent?i.detachEvent(wi(o),c):i.addListener&&i.removeListener&&i.removeListener(c),(o=Zn(i))?(Hn(o,t),o.h==0&&(o.src=null,i[Yn]=null)):Ht(t)}}}function wi(t){return t in Jn?Jn[t]:Jn[t]="on"+t}function Fa(t,i){if(t.da)t=!0;else{i=new ft(i,this);var o=t.listener,c=t.ha||t.src;t.fa&&Xn(t),t=o.call(c,i)}return t}function Zn(t){return t=t[Yn],t instanceof Qt?t:null}var er="__closure_events_fn_"+(1e9*Math.random()>>>0);function tr(t){return typeof t=="function"?t:(t[er]||(t[er]=function(i){return t.handleEvent(i)}),t[er])}function W(){ye.call(this),this.i=new Qt(this),this.M=this,this.F=null}D(W,ye),W.prototype[pt]=!0,W.prototype.removeEventListener=function(t,i,o,c){Ti(this,t,i,o,c)};function Q(t,i){var o,c=t.F;if(c)for(o=[];c;c=c.F)o.push(c);if(t=t.M,c=i.type||i,typeof i=="string")i=new z(i,t);else if(i instanceof z)i.target=i.target||t;else{var g=i;i=new z(c,t),p(i,g)}if(g=!0,o)for(var v=o.length-1;0<=v;v--){var w=i.g=o[v];g=Yt(w,c,!0,i)&&g}if(w=i.g=t,g=Yt(w,c,!0,i)&&g,g=Yt(w,c,!1,i)&&g,o)for(v=0;v<o.length;v++)w=i.g=o[v],g=Yt(w,c,!1,i)&&g}W.prototype.N=function(){if(W.aa.N.call(this),this.i){var t=this.i,i;for(i in t.g){for(var o=t.g[i],c=0;c<o.length;c++)Ht(o[c]);delete t.g[i],t.h--}}this.F=null},W.prototype.K=function(t,i,o,c){return this.i.add(String(t),i,!1,o,c)},W.prototype.L=function(t,i,o,c){return this.i.add(String(t),i,!0,o,c)};function Yt(t,i,o,c){if(i=t.i.g[String(i)],!i)return!0;i=i.concat();for(var g=!0,v=0;v<i.length;++v){var w=i[v];if(w&&!w.da&&w.capture==o){var V=w.listener,B=w.ha||w.src;w.fa&&Hn(t.i,w),g=V.call(B,c)!==!1&&g}}return g&&!c.defaultPrevented}function Ai(t,i,o){if(typeof t=="function")o&&(t=b(t,o));else if(t&&typeof t.handleEvent=="function")t=b(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(i)?-1:I.setTimeout(t,i||0)}function Si(t){t.g=Ai(()=>{t.g=null,t.i&&(t.i=!1,Si(t))},t.l);let i=t.h;t.h=null,t.m.apply(null,i)}class Ua extends ye{constructor(i,o){super(),this.m=i,this.l=o,this.h=null,this.i=!1,this.g=null}j(i){this.h=arguments,this.g?this.i=!0:Si(this)}N(){super.N(),this.g&&(I.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(t){ye.call(this),this.h=t,this.g={}}D(mt,ye);var bi=[];function Ri(t){J(t.g,function(i,o){this.g.hasOwnProperty(o)&&Xn(i)},t),t.g={}}mt.prototype.N=function(){mt.aa.N.call(this),Ri(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nr=I.JSON.stringify,qa=I.JSON.parse,Ba=class{stringify(t){return I.JSON.stringify(t,void 0)}parse(t){return I.JSON.parse(t,void 0)}};function rr(){}rr.prototype.h=null;function Pi(t){return t.h||(t.h=t.i())}function ki(){}var gt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ir(){z.call(this,"d")}D(ir,z);function sr(){z.call(this,"c")}D(sr,z);var Ce={},Ci=null;function Jt(){return Ci=Ci||new W}Ce.La="serverreachability";function Ni(t){z.call(this,Ce.La,t)}D(Ni,z);function _t(t){let i=Jt();Q(i,new Ni(i))}Ce.STAT_EVENT="statevent";function Di(t,i){z.call(this,Ce.STAT_EVENT,t),this.stat=i}D(Di,z);function Y(t){let i=Jt();Q(i,new Di(i,t))}Ce.Ma="timingevent";function Oi(t,i){z.call(this,Ce.Ma,t),this.size=i}D(Oi,z);function yt(t,i){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return I.setTimeout(function(){t()},i)}function It(){this.g=!0}It.prototype.xa=function(){this.g=!1};function ja(t,i,o,c,g,v){t.info(function(){if(t.g)if(v)for(var w="",V=v.split("&"),B=0;B<V.length;B++){var C=V[B].split("=");if(1<C.length){var G=C[0];C=C[1];var K=G.split("_");w=2<=K.length&&K[1]=="type"?w+(G+"="+C+"&"):w+(G+"=redacted&")}}else w=null;else w=v;return"XMLHTTP REQ ("+c+") [attempt "+g+"]: "+i+`
`+o+`
`+w})}function $a(t,i,o,c,g,v,w){t.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+g+"]: "+i+`
`+o+`
`+v+" "+w})}function Ge(t,i,o,c){t.info(function(){return"XMLHTTP TEXT ("+i+"): "+Wa(t,o)+(c?" "+c:"")})}function za(t,i){t.info(function(){return"TIMEOUT: "+i})}It.prototype.info=function(){};function Wa(t,i){if(!t.g)return i;if(!i)return null;try{var o=JSON.parse(i);if(o){for(t=0;t<o.length;t++)if(Array.isArray(o[t])){var c=o[t];if(!(2>c.length)){var g=c[1];if(Array.isArray(g)&&!(1>g.length)){var v=g[0];if(v!="noop"&&v!="stop"&&v!="close")for(var w=1;w<g.length;w++)g[w]=""}}}}return nr(o)}catch{return i}}var Xt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},or;function Zt(){}D(Zt,rr),Zt.prototype.g=function(){return new XMLHttpRequest},Zt.prototype.i=function(){return{}},or=new Zt;function Ie(t,i,o,c){this.j=t,this.i=i,this.l=o,this.R=c||1,this.U=new mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xi}function xi(){this.i=null,this.g="",this.h=!1}var Li={},ar={};function cr(t,i,o){t.L=1,t.v=rn(de(i)),t.m=o,t.P=!0,Mi(t,null)}function Mi(t,i){t.F=Date.now(),en(t),t.A=de(t.v);var o=t.A,c=t.R;Array.isArray(c)||(c=[String(c)]),Ji(o.i,"t",c),t.C=0,o=t.j.J,t.h=new xi,t.g=ms(t.j,o?i:null,!t.m),0<t.O&&(t.M=new Ua(b(t.Y,t,t.g),t.O)),i=t.U,o=t.g,c=t.ca;var g="readystatechange";Array.isArray(g)||(g&&(bi[0]=g.toString()),g=bi);for(var v=0;v<g.length;v++){var w=Ii(o,g[v],c||i.handleEvent,!1,i.h||i);if(!w)break;i.g[w.key]=w}i=t.H?l(t.H):{},t.m?(t.u||(t.u="POST"),i["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,i)):(t.u="GET",t.g.ea(t.A,t.u,null,i)),_t(),ja(t.i,t.u,t.A,t.l,t.R,t.m)}Ie.prototype.ca=function(t){t=t.target;let i=this.M;i&&fe(t)==3?i.j():this.Y(t)},Ie.prototype.Y=function(t){try{if(t==this.g)e:{let K=fe(this.g);var i=this.g.Ba();let Qe=this.g.Z();if(!(3>K)&&(K!=3||this.g&&(this.h.h||this.g.oa()||is(this.g)))){this.J||K!=4||i==7||(i==8||0>=Qe?_t(3):_t(2)),ur(this);var o=this.g.Z();this.X=o;t:if(Fi(this)){var c=is(this.g);t="";var g=c.length,v=fe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ne(this),vt(this);var w="";break t}this.h.i=new I.TextDecoder}for(i=0;i<g;i++)this.h.h=!0,t+=this.h.i.decode(c[i],{stream:!(v&&i==g-1)});c.length=0,this.h.g+=t,this.C=0,w=this.h.g}else w=this.g.oa();if(this.o=o==200,$a(this.i,this.u,this.A,this.l,this.R,K,o),this.o){if(this.T&&!this.K){t:{if(this.g){var V,B=this.g;if((V=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(V)){var C=V;break t}}C=null}if(o=C)Ge(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lr(this,o);else{this.o=!1,this.s=3,Y(12),Ne(this),vt(this);break e}}if(this.P){o=!0;let ie;for(;!this.J&&this.C<w.length;)if(ie=Ga(this,w),ie==ar){K==4&&(this.s=4,Y(14),o=!1),Ge(this.i,this.l,null,"[Incomplete Response]");break}else if(ie==Li){this.s=4,Y(15),Ge(this.i,this.l,w,"[Invalid Chunk]"),o=!1;break}else Ge(this.i,this.l,ie,null),lr(this,ie);if(Fi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),K!=4||w.length!=0||this.h.h||(this.s=1,Y(16),o=!1),this.o=this.o&&o,!o)Ge(this.i,this.l,w,"[Invalid Chunked Response]"),Ne(this),vt(this);else if(0<w.length&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.ba&&!G.M&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),gr(G),G.M=!0,Y(11))}}else Ge(this.i,this.l,w,null),lr(this,w);K==4&&Ne(this),this.o&&!this.J&&(K==4?hs(this.j,this):(this.o=!1,en(this)))}else uc(this.g),o==400&&0<w.indexOf("Unknown SID")?(this.s=3,Y(12)):(this.s=0,Y(13)),Ne(this),vt(this)}}}catch{}finally{}};function Fi(t){return t.g?t.u=="GET"&&t.L!=2&&t.j.Ca:!1}function Ga(t,i){var o=t.C,c=i.indexOf(`
`,o);return c==-1?ar:(o=Number(i.substring(o,c)),isNaN(o)?Li:(c+=1,c+o>i.length?ar:(i=i.slice(c,c+o),t.C=c+o,i)))}Ie.prototype.cancel=function(){this.J=!0,Ne(this)};function en(t){t.S=Date.now()+t.I,Ui(t,t.I)}function Ui(t,i){if(t.B!=null)throw Error("WatchDog timer not null");t.B=yt(b(t.ba,t),i)}function ur(t){t.B&&(I.clearTimeout(t.B),t.B=null)}Ie.prototype.ba=function(){this.B=null;let t=Date.now();0<=t-this.S?(za(this.i,this.A),this.L!=2&&(_t(),Y(17)),Ne(this),this.s=2,vt(this)):Ui(this,this.S-t)};function vt(t){t.j.G==0||t.J||hs(t.j,t)}function Ne(t){ur(t);var i=t.M;i&&typeof i.ma=="function"&&i.ma(),t.M=null,Ri(t.U),t.g&&(i=t.g,t.g=null,i.abort(),i.ma())}function lr(t,i){try{var o=t.j;if(o.G!=0&&(o.g==t||hr(o.h,t))){if(!t.K&&hr(o.h,t)&&o.G==3){try{var c=o.Da.g.parse(i)}catch{c=null}if(Array.isArray(c)&&c.length==3){var g=c;if(g[0]==0){e:if(!o.u){if(o.g)if(o.g.F+3e3<t.F)un(o),an(o);else break e;mr(o),Y(18)}}else o.za=g[1],0<o.za-o.T&&37500>g[2]&&o.F&&o.v==0&&!o.C&&(o.C=yt(b(o.Za,o),6e3));if(1>=ji(o.h)&&o.ca){try{o.ca()}catch{}o.ca=void 0}}else Oe(o,11)}else if((t.K||o.g==t)&&un(o),!Z(i))for(g=o.Da.g.parse(i),i=0;i<g.length;i++){let C=g[i];if(o.T=C[0],C=C[1],o.G==2)if(C[0]=="c"){o.K=C[1],o.ia=C[2];let G=C[3];G!=null&&(o.la=G,o.j.info("VER="+o.la));let K=C[4];K!=null&&(o.Aa=K,o.j.info("SVER="+o.Aa));let Qe=C[5];Qe!=null&&typeof Qe=="number"&&0<Qe&&(c=1.5*Qe,o.L=c,o.j.info("backChannelRequestTimeoutMs_="+c)),c=o;let ie=t.g;if(ie){let hn=ie.g?ie.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hn){var v=c.h;v.g||hn.indexOf("spdy")==-1&&hn.indexOf("quic")==-1&&hn.indexOf("h2")==-1||(v.j=v.l,v.g=new Set,v.h&&(dr(v,v.h),v.h=null))}if(c.D){let _r=ie.g?ie.g.getResponseHeader("X-HTTP-Session-Id"):null;_r&&(c.ya=_r,L(c.I,c.D,_r))}}o.G=3,o.l&&o.l.ua(),o.ba&&(o.R=Date.now()-t.F,o.j.info("Handshake RTT: "+o.R+"ms")),c=o;var w=t;if(c.qa=ps(c,c.J?c.ia:null,c.W),w.K){$i(c.h,w);var V=w,B=c.L;B&&(V.I=B),V.B&&(ur(V),en(V)),c.g=w}else us(c);0<o.i.length&&cn(o)}else C[0]!="stop"&&C[0]!="close"||Oe(o,7);else o.G==3&&(C[0]=="stop"||C[0]=="close"?C[0]=="stop"?Oe(o,7):pr(o):C[0]!="noop"&&o.l&&o.l.ta(C),o.v=0)}}_t(4)}catch{}}var Ka=class{constructor(t,i){this.g=t,this.map=i}};function qi(t){this.l=t||10,I.PerformanceNavigationTiming?(t=I.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(I.chrome&&I.chrome.loadTimes&&I.chrome.loadTimes()&&I.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bi(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ji(t){return t.h?1:t.g?t.g.size:0}function hr(t,i){return t.h?t.h==i:t.g?t.g.has(i):!1}function dr(t,i){t.g?t.g.add(i):t.h=i}function $i(t,i){t.h&&t.h==i?t.h=null:t.g&&t.g.has(i)&&t.g.delete(i)}qi.prototype.cancel=function(){if(this.i=zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function zi(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let i=t.i;for(let o of t.g.values())i=i.concat(o.D);return i}return q(t.i)}function Ha(t){if(t.V&&typeof t.V=="function")return t.V();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(E(t)){for(var i=[],o=t.length,c=0;c<o;c++)i.push(t[c]);return i}i=[],o=0;for(c in t)i[o++]=t[c];return i}function Qa(t){if(t.na&&typeof t.na=="function")return t.na();if(!t.V||typeof t.V!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(E(t)||typeof t=="string"){var i=[];t=t.length;for(var o=0;o<t;o++)i.push(o);return i}i=[],o=0;for(let c in t)i[o++]=c;return i}}}function Wi(t,i){if(t.forEach&&typeof t.forEach=="function")t.forEach(i,void 0);else if(E(t)||typeof t=="string")Array.prototype.forEach.call(t,i,void 0);else for(var o=Qa(t),c=Ha(t),g=c.length,v=0;v<g;v++)i.call(void 0,c[v],o&&o[v],t)}var Gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(t,i){if(t){t=t.split("&");for(var o=0;o<t.length;o++){var c=t[o].indexOf("="),g=null;if(0<=c){var v=t[o].substring(0,c);g=t[o].substring(c+1)}else v=t[o];i(v,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function De(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof De){this.h=t.h,tn(this,t.j),this.o=t.o,this.g=t.g,nn(this,t.s),this.l=t.l;var i=t.i,o=new wt;o.i=i.i,i.g&&(o.g=new Map(i.g),o.h=i.h),Ki(this,o),this.m=t.m}else t&&(i=String(t).match(Gi))?(this.h=!1,tn(this,i[1]||"",!0),this.o=Et(i[2]||""),this.g=Et(i[3]||"",!0),nn(this,i[4]),this.l=Et(i[5]||"",!0),Ki(this,i[6]||"",!0),this.m=Et(i[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}De.prototype.toString=function(){var t=[],i=this.j;i&&t.push(Tt(i,Hi,!0),":");var o=this.g;return(o||i=="file")&&(t.push("//"),(i=this.o)&&t.push(Tt(i,Hi,!0),"@"),t.push(encodeURIComponent(String(o)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o=this.s,o!=null&&t.push(":",String(o))),(o=this.l)&&(this.g&&o.charAt(0)!="/"&&t.push("/"),t.push(Tt(o,o.charAt(0)=="/"?Za:Xa,!0))),(o=this.i.toString())&&t.push("?",o),(o=this.m)&&t.push("#",Tt(o,tc)),t.join("")};function de(t){return new De(t)}function tn(t,i,o){t.j=o?Et(i,!0):i,t.j&&(t.j=t.j.replace(/:$/,""))}function nn(t,i){if(i){if(i=Number(i),isNaN(i)||0>i)throw Error("Bad port number "+i);t.s=i}else t.s=null}function Ki(t,i,o){i instanceof wt?(t.i=i,nc(t.i,t.h)):(o||(i=Tt(i,ec)),t.i=new wt(i,t.h))}function L(t,i,o){t.i.set(i,o)}function rn(t){return L(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Et(t,i){return t?i?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Tt(t,i,o){return typeof t=="string"?(t=encodeURI(t).replace(i,Ja),o&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ja(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Hi=/[#\/\?@]/g,Xa=/[#\?:]/g,Za=/[#\?]/g,ec=/[#\?@]/g,tc=/#/g;function wt(t,i){this.h=this.g=null,this.i=t||null,this.j=!!i}function ve(t){t.g||(t.g=new Map,t.h=0,t.i&&Ya(t.i,function(i,o){t.add(decodeURIComponent(i.replace(/\+/g," ")),o)}))}r=wt.prototype,r.add=function(t,i){ve(this),this.i=null,t=Ke(this,t);var o=this.g.get(t);return o||this.g.set(t,o=[]),o.push(i),this.h+=1,this};function Qi(t,i){ve(t),i=Ke(t,i),t.g.has(i)&&(t.i=null,t.h-=t.g.get(i).length,t.g.delete(i))}function Yi(t,i){return ve(t),i=Ke(t,i),t.g.has(i)}r.forEach=function(t,i){ve(this),this.g.forEach(function(o,c){o.forEach(function(g){t.call(i,g,c,this)},this)},this)},r.na=function(){ve(this);let t=Array.from(this.g.values()),i=Array.from(this.g.keys()),o=[];for(let c=0;c<i.length;c++){let g=t[c];for(let v=0;v<g.length;v++)o.push(i[c])}return o},r.V=function(t){ve(this);let i=[];if(typeof t=="string")Yi(this,t)&&(i=i.concat(this.g.get(Ke(this,t))));else{t=Array.from(this.g.values());for(let o=0;o<t.length;o++)i=i.concat(t[o])}return i},r.set=function(t,i){return ve(this),this.i=null,t=Ke(this,t),Yi(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[i]),this.h+=1,this},r.get=function(t,i){return t?(t=this.V(t),0<t.length?String(t[0]):i):i};function Ji(t,i,o){Qi(t,i),0<o.length&&(t.i=null,t.g.set(Ke(t,i),q(o)),t.h+=o.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],i=Array.from(this.g.keys());for(var o=0;o<i.length;o++){var c=i[o];let v=encodeURIComponent(String(c)),w=this.V(c);for(c=0;c<w.length;c++){var g=v;w[c]!==""&&(g+="="+encodeURIComponent(String(w[c]))),t.push(g)}}return this.i=t.join("&")};function Ke(t,i){return i=String(i),t.j&&(i=i.toLowerCase()),i}function nc(t,i){i&&!t.j&&(ve(t),t.i=null,t.g.forEach(function(o,c){var g=c.toLowerCase();c!=g&&(Qi(this,c),Ji(this,g,o))},t)),t.j=i}function rc(t,i){let o=new It;if(I.Image){let c=new Image;c.onload=x(Ee,o,"TestLoadImage: loaded",!0,i,c),c.onerror=x(Ee,o,"TestLoadImage: error",!1,i,c),c.onabort=x(Ee,o,"TestLoadImage: abort",!1,i,c),c.ontimeout=x(Ee,o,"TestLoadImage: timeout",!1,i,c),I.setTimeout(function(){c.ontimeout&&c.ontimeout()},1e4),c.src=t}else i(!1)}function ic(t,i){let o=new It,c=new AbortController,g=setTimeout(()=>{c.abort(),Ee(o,"TestPingServer: timeout",!1,i)},1e4);fetch(t,{signal:c.signal}).then(v=>{clearTimeout(g),v.ok?Ee(o,"TestPingServer: ok",!0,i):Ee(o,"TestPingServer: server error",!1,i)}).catch(()=>{clearTimeout(g),Ee(o,"TestPingServer: error",!1,i)})}function Ee(t,i,o,c,g){try{g&&(g.onload=null,g.onerror=null,g.onabort=null,g.ontimeout=null),c(o)}catch{}}function sc(){this.g=new Ba}function oc(t,i,o){let c=o||"";try{Wi(t,function(g,v){let w=g;T(g)&&(w=nr(g)),i.push(c+v+"="+encodeURIComponent(w))})}catch(g){throw i.push(c+"type="+encodeURIComponent("_badmap")),g}}function At(t){this.l=t.Ub||null,this.j=t.eb||!1}D(At,rr),At.prototype.g=function(){return new sn(this.l,this.j)},At.prototype.i=(function(t){return function(){return t}})({});function sn(t,i){W.call(this),this.D=t,this.o=i,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(sn,W),r=sn.prototype,r.open=function(t,i){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=i,this.readyState=1,bt(this)},r.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let i={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(i.body=t),(this.D||I).fetch(new Request(this.A,i)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,St(this)),this.readyState=0},r.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,bt(this)),this.g&&(this.readyState=3,bt(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof I.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xi(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xi(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}r.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var i=t.value?t.value:new Uint8Array(0);(i=this.v.decode(i,{stream:!t.done}))&&(this.response=this.responseText+=i)}t.done?St(this):bt(this),this.readyState==3&&Xi(this)}},r.Ra=function(t){this.g&&(this.response=this.responseText=t,St(this))},r.Qa=function(t){this.g&&(this.response=t,St(this))},r.ga=function(){this.g&&St(this)};function St(t){t.readyState=4,t.l=null,t.j=null,t.v=null,bt(t)}r.setRequestHeader=function(t,i){this.u.append(t,i)},r.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],i=this.h.entries();for(var o=i.next();!o.done;)o=o.value,t.push(o[0]+": "+o[1]),o=i.next();return t.join(`\r
`)};function bt(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});function Zi(t){let i="";return J(t,function(o,c){i+=c,i+=":",i+=o,i+=`\r
`}),i}function fr(t,i,o){e:{for(c in o){var c=!1;break e}c=!0}c||(o=Zi(o),typeof t=="string"?o!=null&&encodeURIComponent(String(o)):L(t,i,o))}function F(t){W.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(F,W);var ac=/^https?$/i,cc=["POST","PUT"];r=F.prototype,r.Ha=function(t){this.J=t},r.ea=function(t,i,o,c){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);i=i?i.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():or.g(),this.v=this.o?Pi(this.o):Pi(or),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(i,String(t),!0),this.B=!1}catch(v){es(this,v);return}if(t=o||"",o=new Map(this.headers),c)if(Object.getPrototypeOf(c)===Object.prototype)for(var g in c)o.set(g,c[g]);else if(typeof c.keys=="function"&&typeof c.get=="function")for(let v of c.keys())o.set(v,c.get(v));else throw Error("Unknown input type for opt_headers: "+String(c));c=Array.from(o.keys()).find(v=>v.toLowerCase()=="content-type"),g=I.FormData&&t instanceof I.FormData,!(0<=Array.prototype.indexOf.call(cc,i,void 0))||c||g||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[v,w]of o)this.g.setRequestHeader(v,w);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rs(this),this.u=!0,this.g.send(t),this.u=!1}catch(v){es(this,v)}};function es(t,i){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=i,t.m=5,ts(t),on(t)}function ts(t){t.A||(t.A=!0,Q(t,"complete"),Q(t,"error"))}r.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,Q(this,"complete"),Q(this,"abort"),on(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),on(this,!0)),F.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ns(this):this.bb())},r.bb=function(){ns(this)};function ns(t){if(t.h&&typeof f<"u"&&(!t.v[1]||fe(t)!=4||t.Z()!=2)){if(t.u&&fe(t)==4)Ai(t.Ea,0,t);else if(Q(t,"readystatechange"),fe(t)==4){t.h=!1;try{let w=t.Z();e:switch(w){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}var o;if(!(o=i)){var c;if(c=w===0){var g=String(t.D).match(Gi)[1]||null;!g&&I.self&&I.self.location&&(g=I.self.location.protocol.slice(0,-1)),c=!ac.test(g?g.toLowerCase():"")}o=c}if(o)Q(t,"complete"),Q(t,"success");else{t.m=6;try{var v=2<fe(t)?t.g.statusText:""}catch{v=""}t.l=v+" ["+t.Z()+"]",ts(t)}}finally{on(t)}}}}function on(t,i){if(t.g){rs(t);let o=t.g,c=t.v[0]?()=>{}:null;t.g=null,t.v=null,i||Q(t,"ready");try{o.onreadystatechange=c}catch{}}}function rs(t){t.I&&(I.clearTimeout(t.I),t.I=null)}r.isActive=function(){return!!this.g};function fe(t){return t.g?t.g.readyState:0}r.Z=function(){try{return 2<fe(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(t){if(this.g){var i=this.g.responseText;return t&&i.indexOf(t)==0&&(i=i.substring(t.length)),qa(i)}};function is(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function uc(t){let i={};t=(t.g&&2<=fe(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let c=0;c<t.length;c++){if(Z(t[c]))continue;var o=m(t[c]);let g=o[0];if(o=o[1],typeof o!="string")continue;o=o.trim();let v=i[g]||[];i[g]=v,v.push(o)}_(i,function(c){return c.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rt(t,i,o){return o&&o.internalChannelParams&&o.internalChannelParams[t]||i}function ss(t){this.Aa=0,this.i=[],this.j=new It,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rt("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rt("baseRetryDelayMs",5e3,t),this.cb=Rt("retryDelaySeedMs",1e4,t),this.Wa=Rt("forwardChannelMaxRetries",2,t),this.wa=Rt("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new qi(t&&t.concurrentRequestLimit),this.Da=new sc,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ss.prototype,r.la=8,r.G=1,r.connect=function(t,i,o,c){Y(0),this.W=t,this.H=i||{},o&&c!==void 0&&(this.H.OSID=o,this.H.OAID=c),this.F=this.X,this.I=ps(this,null,this.W),cn(this)};function pr(t){if(os(t),t.G==3){var i=t.U++,o=de(t.I);if(L(o,"SID",t.K),L(o,"RID",i),L(o,"TYPE","terminate"),Pt(t,o),i=new Ie(t,t.j,i),i.L=2,i.v=rn(de(o)),o=!1,I.navigator&&I.navigator.sendBeacon)try{o=I.navigator.sendBeacon(i.v.toString(),"")}catch{}!o&&I.Image&&(new Image().src=i.v,o=!0),o||(i.g=ms(i.j,null),i.g.ea(i.v)),i.F=Date.now(),en(i)}fs(t)}function an(t){t.g&&(gr(t),t.g.cancel(),t.g=null)}function os(t){an(t),t.u&&(I.clearTimeout(t.u),t.u=null),un(t),t.h.cancel(),t.s&&(typeof t.s=="number"&&I.clearTimeout(t.s),t.s=null)}function cn(t){if(!Bi(t.h)&&!t.s){t.s=!0;var i=t.Ga;ht||yi(),dt||(ht(),dt=!0),Kn.add(i,t),t.B=0}}function lc(t,i){return ji(t.h)>=t.h.j-(t.s?1:0)?!1:t.s?(t.i=i.D.concat(t.i),!0):t.G==1||t.G==2||t.B>=(t.Va?0:t.Wa)?!1:(t.s=yt(b(t.Ga,t,i),ds(t,t.B)),t.B++,!0)}r.Ga=function(t){if(this.s)if(this.s=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;let g=new Ie(this,this.j,t),v=this.o;if(this.S&&(v?(v=l(v),p(v,this.S)):v=this.S),this.m!==null||this.O||(g.H=v,v=null),this.P)e:{for(var i=0,o=0;o<this.i.length;o++){t:{var c=this.i[o];if("__data__"in c.map&&(c=c.map.__data__,typeof c=="string")){c=c.length;break t}c=void 0}if(c===void 0)break;if(i+=c,4096<i){i=o;break e}if(i===4096||o===this.i.length-1){i=o+1;break e}}i=1e3}else i=1e3;i=cs(this,g,i),o=de(this.I),L(o,"RID",t),L(o,"CVER",22),this.D&&L(o,"X-HTTP-Session-Id",this.D),Pt(this,o),v&&(this.O?i="headers="+encodeURIComponent(String(Zi(v)))+"&"+i:this.m&&fr(o,this.m,v)),dr(this.h,g),this.Ua&&L(o,"TYPE","init"),this.P?(L(o,"$req",i),L(o,"SID","null"),g.T=!0,cr(g,o,null)):cr(g,o,i),this.G=2}}else this.G==3&&(t?as(this,t):this.i.length==0||Bi(this.h)||as(this))};function as(t,i){var o;i?o=i.l:o=t.U++;let c=de(t.I);L(c,"SID",t.K),L(c,"RID",o),L(c,"AID",t.T),Pt(t,c),t.m&&t.o&&fr(c,t.m,t.o),o=new Ie(t,t.j,o,t.B+1),t.m===null&&(o.H=t.o),i&&(t.i=i.D.concat(t.i)),i=cs(t,o,1e3),o.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),dr(t.h,o),cr(o,c,i)}function Pt(t,i){t.H&&J(t.H,function(o,c){L(i,c,o)}),t.l&&Wi({},function(o,c){L(i,c,o)})}function cs(t,i,o){o=Math.min(t.i.length,o);var c=t.l?b(t.l.Na,t.l,t):null;e:{var g=t.i;let v=-1;for(;;){let w=["count="+o];v==-1?0<o?(v=g[0].g,w.push("ofs="+v)):v=0:w.push("ofs="+v);let V=!0;for(let B=0;B<o;B++){let C=g[B].g,G=g[B].map;if(C-=v,0>C)v=Math.max(0,g[B].g-100),V=!1;else try{oc(G,w,"req"+C+"_")}catch{c&&c(G)}}if(V){c=w.join("&");break e}}}return t=t.i.splice(0,o),i.D=t,c}function us(t){if(!t.g&&!t.u){t.Y=1;var i=t.Fa;ht||yi(),dt||(ht(),dt=!0),Kn.add(i,t),t.v=0}}function mr(t){return t.g||t.u||3<=t.v?!1:(t.Y++,t.u=yt(b(t.Fa,t),ds(t,t.v)),t.v++,!0)}r.Fa=function(){if(this.u=null,ls(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=yt(b(this.ab,this),t)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Y(10),an(this),ls(this))};function gr(t){t.A!=null&&(I.clearTimeout(t.A),t.A=null)}function ls(t){t.g=new Ie(t,t.j,"rpc",t.Y),t.m===null&&(t.g.H=t.o),t.g.O=0;var i=de(t.qa);L(i,"RID","rpc"),L(i,"SID",t.K),L(i,"AID",t.T),L(i,"CI",t.F?"0":"1"),!t.F&&t.ja&&L(i,"TO",t.ja),L(i,"TYPE","xmlhttp"),Pt(t,i),t.m&&t.o&&fr(i,t.m,t.o),t.L&&(t.g.I=t.L);var o=t.g;t=t.ia,o.L=1,o.v=rn(de(i)),o.m=null,o.P=!0,Mi(o,t)}r.Za=function(){this.C!=null&&(this.C=null,an(this),mr(this),Y(19))};function un(t){t.C!=null&&(I.clearTimeout(t.C),t.C=null)}function hs(t,i){var o=null;if(t.g==i){un(t),gr(t),t.g=null;var c=2}else if(hr(t.h,i))o=i.D,$i(t.h,i),c=1;else return;if(t.G!=0){if(i.o)if(c==1){o=i.m?i.m.length:0,i=Date.now()-i.F;var g=t.B;c=Jt(),Q(c,new Oi(c,o)),cn(t)}else us(t);else if(g=i.s,g==3||g==0&&0<i.X||!(c==1&&lc(t,i)||c==2&&mr(t)))switch(o&&0<o.length&&(i=t.h,i.i=i.i.concat(o)),g){case 1:Oe(t,5);break;case 4:Oe(t,10);break;case 3:Oe(t,6);break;default:Oe(t,2)}}}function ds(t,i){let o=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(o*=2),o*i}function Oe(t,i){if(t.j.info("Error code "+i),i==2){var o=b(t.fb,t),c=t.Xa;let g=!c;c=new De(c||"//www.google.com/images/cleardot.gif"),I.location&&I.location.protocol=="http"||tn(c,"https"),rn(c),g?rc(c.toString(),o):ic(c.toString(),o)}else Y(2);t.G=0,t.l&&t.l.sa(i),fs(t),os(t)}r.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Y(2)):(this.j.info("Failed to ping google.com"),Y(1))};function fs(t){if(t.G=0,t.ka=[],t.l){let i=zi(t.h);(i.length!=0||t.i.length!=0)&&(M(t.ka,i),M(t.ka,t.i),t.h.i.length=0,q(t.i),t.i.length=0),t.l.ra()}}function ps(t,i,o){var c=o instanceof De?de(o):new De(o);if(c.g!="")i&&(c.g=i+"."+c.g),nn(c,c.s);else{var g=I.location;c=g.protocol,i=i?i+"."+g.hostname:g.hostname,g=+g.port;var v=new De(null);c&&tn(v,c),i&&(v.g=i),g&&nn(v,g),o&&(v.l=o),c=v}return o=t.D,i=t.ya,o&&i&&L(c,o,i),L(c,"VER",t.la),Pt(t,c),c}function ms(t,i,o){if(i&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return i=t.Ca&&!t.pa?new F(new At({eb:o})):new F(t.pa),i.Ha(t.J),i}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function gs(){}r=gs.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ln(){}ln.prototype.g=function(t,i){return new ee(t,i)};function ee(t,i){W.call(this),this.g=new ss(i),this.l=t,this.h=i&&i.messageUrlParams||null,t=i&&i.messageHeaders||null,i&&i.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=i&&i.initMessageHeaders||null,i&&i.messageContentType&&(t?t["X-WebChannel-Content-Type"]=i.messageContentType:t={"X-WebChannel-Content-Type":i.messageContentType}),i&&i.va&&(t?t["X-WebChannel-Client-Profile"]=i.va:t={"X-WebChannel-Client-Profile":i.va}),this.g.S=t,(t=i&&i.Sb)&&!Z(t)&&(this.g.m=t),this.v=i&&i.supportsCrossDomainXhr||!1,this.u=i&&i.sendRawJson||!1,(i=i&&i.httpSessionIdParam)&&!Z(i)&&(this.g.D=i,t=this.h,t!==null&&i in t&&(t=this.h,i in t&&delete t[i])),this.j=new He(this)}D(ee,W),ee.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ee.prototype.close=function(){pr(this.g)},ee.prototype.o=function(t){var i=this.g;if(typeof t=="string"){var o={};o.__data__=t,t=o}else this.u&&(o={},o.__data__=nr(t),t=o);i.i.push(new Ka(i.Ya++,t)),i.G==3&&cn(i)},ee.prototype.N=function(){this.g.l=null,delete this.j,pr(this.g),delete this.g,ee.aa.N.call(this)};function _s(t){ir.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var i=t.__sm__;if(i){e:{for(let o in i){t=o;break e}t=void 0}(this.i=t)&&(t=this.i,i=i!==null&&t in i?i[t]:void 0),this.data=i}else this.data=t}D(_s,ir);function ys(){sr.call(this),this.status=1}D(ys,sr);function He(t){this.g=t}D(He,gs),He.prototype.ua=function(){Q(this.g,"a")},He.prototype.ta=function(t){Q(this.g,new _s(t))},He.prototype.sa=function(t){Q(this.g,new ys)},He.prototype.ra=function(){Q(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,ee.prototype.send=ee.prototype.o,ee.prototype.open=ee.prototype.m,ee.prototype.close=ee.prototype.close,jo=me.createWebChannelTransport=function(){return new ln},Bo=me.getStatEventTarget=function(){return Jt()},qo=me.Event=Ce,Uo=me.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xt.NO_ERROR=0,Xt.TIMEOUT=8,Xt.HTTP_ERROR=6,Fo=me.ErrorCode=Xt,Vi.COMPLETE="complete",Mo=me.EventType=Vi,ki.EventType=gt,gt.OPEN="a",gt.CLOSE="b",gt.ERROR="c",gt.MESSAGE="d",W.prototype.listen=W.prototype.K,Lo=me.WebChannel=ki,Al=me.FetchXmlHttpFactory=At,F.prototype.listenOnce=F.prototype.L,F.prototype.getLastError=F.prototype.Ka,F.prototype.getLastErrorCode=F.prototype.Ba,F.prototype.getStatus=F.prototype.Z,F.prototype.getResponseJson=F.prototype.Oa,F.prototype.getResponseText=F.prototype.oa,F.prototype.send=F.prototype.ea,F.prototype.setWithCredentials=F.prototype.Ha,xo=me.XhrIo=F}).apply(typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{});var $o="@firebase/firestore",zo="4.8.0";var j=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};j.UNAUTHENTICATED=new j(null),j.GOOGLE_CREDENTIALS=new j("google-credentials-uid"),j.FIRST_PARTY=new j("first-party-uid"),j.MOCK_USER=new j("mock-user");var Wt="11.10.0";var ct=new Xe("@firebase/firestore");function ae(r,...e){if(ct.logLevel<=xe.DEBUG){let n=e.map(mi);ct.debug(`Firestore (${Wt}): ${r}`,...n)}}function ra(r,...e){if(ct.logLevel<=xe.ERROR){let n=e.map(mi);ct.error(`Firestore (${Wt}): ${r}`,...n)}}function Sl(r,...e){if(ct.logLevel<=xe.WARN){let n=e.map(mi);ct.warn(`Firestore (${Wt}): ${r}`,...n)}}function mi(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function X(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,ia(r,s,n)}function ia(r,e,n){let s=`FIRESTORE (${Wt}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw ra(s),new Error(s)}function $e(r,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,r||ia(e,a,s)}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=class extends Nt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ze=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ln=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Yr=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(j.UNAUTHENTICATED))}shutdown(){}},Jr=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Xr=class{constructor(e){this.t=e,this.currentUser=j.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){$e(this.o===void 0,42304);let s=this.i,a=E=>this.i!==s?(s=this.i,n(E)):Promise.resolve(),u=new ze;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ze,e.enqueueRetryable(()=>a(this.currentUser))};let f=()=>{let E=u;e.enqueueRetryable(()=>A(this,null,function*(){yield E.promise,yield a(this.currentUser)}))},I=E=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(E=>I(E)),setTimeout(()=>{if(!this.auth){let E=this.t.getImmediate({optional:!0});E?I(E):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ze)}},0),f()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new Ln(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new j(e)}},Zr=class{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=j.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},ei=class{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new Zr(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(j.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mn=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ti=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pe(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){$e(this.o===void 0,3512);let s=u=>{u.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);let f=u.token!==this.m;return this.m=u.token,ae("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};let a=u=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>a(u)),setTimeout(()=>{if(!this.appCheck){let u=this.V.getImmediate({optional:!0});u?a(u):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mn(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?($e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Mn(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function bl(r){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}function Rl(){return new TextEncoder}var ni=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),s="";for(;s.length<20;){let a=bl(40);for(let u=0;u<a.length;++u)s.length<20&&a[u]<n&&(s+=e.charAt(a[u]%62))}return s}};function ne(r,e){return r<e?-1:r>e?1:0}function Pl(r,e){let n=0;for(;n<r.length&&n<e.length;){let s=r.codePointAt(n),a=e.codePointAt(n);if(s!==a){if(s<128&&a<128)return ne(s,a);{let u=Rl(),f=kl(u.encode(Wo(r,n)),u.encode(Wo(e,n)));return f!==0?f:ne(s,a)}}n+=s>65535?2:1}return ne(r.length,e.length)}function Wo(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function kl(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return ne(r[n],e[n]);return ne(r.length,e.length)}var Go="__name__",Fn=class r{constructor(e,n,s){n===void 0?n=0:n>e.length&&X(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&X(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return r.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof r?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let s=Math.min(e.length,n.length);for(let a=0;a<s;a++){let u=r.compareSegments(e.get(a),n.get(a));if(u!==0)return u}return ne(e.length,n.length)}static compareSegments(e,n){let s=r.isNumericId(e),a=r.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?r.extractNumericId(e).compare(r.extractNumericId(n)):Pl(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vn.fromString(e.substring(4,e.length-2))}},ge=class r extends Fn{construct(e,n,s){return new r(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let s of e){if(s.indexOf("//")>=0)throw new R(k.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new r(n)}static emptyPath(){return new r([])}},Cl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ri=class r extends Fn{construct(e,n,s){return new r(e,n,s)}static isValidIdentifier(e){return Cl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Go}static keyField(){return new r([Go])}static fromServerFormat(e){let n=[],s="",a=0,u=()=>{if(s.length===0)throw new R(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""},f=!1;for(;a<e.length;){let I=e[a];if(I==="\\"){if(a+1===e.length)throw new R(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let E=e[a+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new R(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=E,a+=2}else I==="`"?(f=!f,a++):I!=="."||f?(s+=I,a++):(u(),a++)}if(u(),f)throw new R(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new r(n)}static emptyPath(){return new r([])}};var _e=class r{constructor(e){this.path=e}static fromPath(e){return new r(ge.fromString(e))}static fromName(e){return new r(ge.fromString(e).popFirst(5))}static empty(){return new r(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new r(new ge(e.slice()))}};function Nl(r,e,n,s){if(e===!0&&s===!0)throw new R(k.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Dl(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ol(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{let e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":X(12329,{type:typeof r})}function Vl(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new R(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ol(r);throw new R(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function U(r,e){let n={typeString:r};return e&&(n.value=e),n}function Gt(r,e){if(!Dl(r))throw new R(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(let s in e)if(e[s]){let a=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}let f=r[s];if(a&&typeof f!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new R(k.INVALID_ARGUMENT,n);return!0}var Ko=-62135596800,Ho=1e6,Ut=class r{static now(){return r.fromMillis(Date.now())}static fromDate(e){return r.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Ho);return new r(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new R(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new R(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ko)throw new R(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ho}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:r._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gt(e,r._jsonSchema))return new r(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Ko;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:U("string",Ut._jsonSchemaVersion),seconds:U("number"),nanoseconds:U("number")};var ii=class{constructor(e,n,s,a){this.indexId=e,this.collectionGroup=n,this.fields=s,this.indexState=a}};ii.UNKNOWN_ID=-1;function xl(r){return r.name==="IndexedDbTransactionError"}function Ll(r){return r===0&&1/r==-1/0}var Ml="remoteDocuments",sa="owner";var oa="mutationQueues";var aa="mutations";var ca="documentMutations",Fl="remoteDocumentsV14";var ua="remoteDocumentGlobal";var la="targets";var ha="targetDocuments";var da="targetGlobal",fa="collectionParents";var pa="clientMetadata";var ma="bundles";var ga="namedQueries";var Ul="indexConfiguration";var ql="indexState";var Bl="indexEntries";var _a="documentOverlays";var jl="globals";var $l=[oa,aa,ca,Ml,la,sa,da,ha,pa,ua,fa,ma,ga],Cf=[...$l,_a],zl=[oa,aa,ca,Fl,la,sa,da,ha,pa,ua,fa,ma,ga,_a],Wl=zl,Gl=[...Wl,Ul,ql,Bl];var Nf=[...Gl,jl];var ut=class r{constructor(e,n){this.comparator=e,this.root=n||ue.EMPTY}insert(e,n){return new r(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ue.BLACK,null,null))}remove(e){return new r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ue.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){let a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){let e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new it(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new it(this.root,e,this.comparator,!1)}getReverseIterator(){return new it(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new it(this.root,e,this.comparator,!0)}},it=class{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&a&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ue=class r{constructor(e,n,s,a,u){this.key=e,this.value=n,this.color=s??r.RED,this.left=a??r.EMPTY,this.right=u??r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,u){return new r(e??this.key,n??this.value,s??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this,u=s(e,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(e,n,s),null):u===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return r.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}};ue.EMPTY=null,ue.RED=!0,ue.BLACK=!1;ue.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,n,s,a,u){return this}insert(e,n,s){return new ue(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Un=class r{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){let s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){let a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qn(this.data.getIterator())}getIteratorFrom(e){return new qn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof r)||this.size!==e.size)return!1;let n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){let a=n.getNext().key,u=s.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new r(this.comparator);return n.data=e,n}},qn=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var si=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pe=class r{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new si("Invalid base64 string: "+u):u}})(e);return new r(n)}static fromUint8Array(e){let n=(function(a){let u="";for(let f=0;f<a.length;++f)u+=String.fromCharCode(a[f]);return u})(e);return new r(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pe.EMPTY_BYTE_STRING=new Pe("");var Kl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hl(r){if($e(!!r,39018),typeof r=="string"){let e=0,n=Kl.exec(r);if($e(!!n,46558,{timestamp:r}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}let s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:qt(r.seconds),nanos:qt(r.nanos)}}function qt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ql(r){return typeof r=="string"?Pe.fromBase64String(r):Pe.fromUint8Array(r)}var oi="(default)",ai=class r{constructor(e,n){this.projectId=e,this.database=n||oi}static empty(){return new r("","")}get isDefaultDatabase(){return this.database===oi}isEqual(e){return e instanceof r&&e.projectId===this.projectId&&e.database===this.database}};var ya="__type__",Yl="__max__";var Ia="__vector__",va="value";function Jl(r){var e,n;return((n=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ya])===null||n===void 0?void 0:n.stringValue)===Ia}function Xl(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Yl}var Of={mapValue:{fields:{[ya]:{stringValue:Ia},[va]:{arrayValue:{}}}}};var ci=class{constructor(e,n=null,s=[],a=[],u=null,f="F",I=null,E=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=u,this.limitType=f,this.startAt=I,this.endAt=E,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Zl(r){return new ci(r)}var Vf=new ut(_e.comparator);var xf=new ut(_e.comparator);var Lf=new ut(_e.comparator),Mf=new Un(_e.comparator);var Ff=new Un(ne);var Qo,P;(P=Qo||(Qo={}))[P.OK=0]="OK",P[P.CANCELLED=1]="CANCELLED",P[P.UNKNOWN=2]="UNKNOWN",P[P.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",P[P.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",P[P.NOT_FOUND=5]="NOT_FOUND",P[P.ALREADY_EXISTS=6]="ALREADY_EXISTS",P[P.PERMISSION_DENIED=7]="PERMISSION_DENIED",P[P.UNAUTHENTICATED=16]="UNAUTHENTICATED",P[P.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",P[P.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",P[P.ABORTED=10]="ABORTED",P[P.OUT_OF_RANGE=11]="OUT_OF_RANGE",P[P.UNIMPLEMENTED=12]="UNIMPLEMENTED",P[P.INTERNAL=13]="INTERNAL",P[P.UNAVAILABLE=14]="UNAVAILABLE",P[P.DATA_LOSS=15]="DATA_LOSS";var Uf=new Vn([4294967295,4294967295],0);var Bn=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(qt(e.integerValue));else if("doubleValue"in e){let s=qt(e.doubleValue);isNaN(s)?this.Ct(n,13):(this.Ct(n,15),Ll(s)?n.Ft(0):n.Ft(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ct(n,20),typeof s=="string"&&(s=Hl(s)),n.Mt(`${s.seconds||""}`),n.Ft(s.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Ql(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let s=e.geoPointValue;this.Ct(n,45),n.Ft(s.latitude||0),n.Ft(s.longitude||0)}else"mapValue"in e?Xl(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):Jl(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):X(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let s=e.fields||{};this.Ct(n,55);for(let a of Object.keys(s))this.xt(a,n),this.Dt(s[a],n)}Lt(e,n){var s,a;let u=e.fields||{};this.Ct(n,53);let f=va,I=((a=(s=u[f].arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.length)||0;this.Ct(n,15),n.Ft(qt(I)),this.xt(f,n),this.Dt(u[f],n)}qt(e,n){let s=e.values||[];this.Ct(n,50);for(let a of s)this.Dt(a,n)}Bt(e,n){this.Ct(n,37),_e.fromName(e).path.forEach(s=>{this.Ct(n,60),this.$t(s,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Bn.Ut=new Bn;var qf=new Uint8Array(0);var Ea=41943040,ce=class r{static withCacheSize(e){return new r(e,r.DEFAULT_COLLECTION_PERCENTILE,r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}};ce.DEFAULT_COLLECTION_PERCENTILE=10,ce.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ce.DEFAULT=new ce(Ea,ce.DEFAULT_COLLECTION_PERCENTILE,ce.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ce.DISABLED=new ce(-1,0,0);var eh=1048576;function Qr(){return typeof document<"u"?document:null}var ui=class{constructor(e,n,s=1e3,a=1.5,u=6e4){this.Fi=e,this.timerId=n,this.d_=s,this.E_=a,this.A_=u,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),s=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-s);a>0&&ae("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var li=class r{constructor(e,n,s,a,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=u,this.deferred=new ze,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,u){let f=Date.now()+s,I=new r(e,n,f,a,u);return I.start(s),I}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Yo,Jo;(Jo=Yo||(Yo={})).Fa="default",Jo.Cache="cache";function th(r){let e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}var Xo=new Map;var Ta="firestore.googleapis.com",Zo=!0,jn=class{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new R(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ta,this.ssl=Zo}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Zo;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ea;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eh)throw new R(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nl("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=th((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new R(k.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new R(k.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new R(k.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$n=class{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jn({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new R(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new R(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jn(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Yr;switch(s.type){case"firstParty":return new ei(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new R(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return A(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let s=Xo.get(n);s&&(ae("ComponentProvider","Removing Datastore"),Xo.delete(n),s.terminate())})(this),Promise.resolve()}};function wa(r,e,n,s={}){var a;r=Vl(r,$n);let u=Ct(e),f=r._getSettings(),I=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),E=`${e}:${n}`;u&&(wr(`https://${E}`),Ar("Firestore",!0)),f.host!==Ta&&f.host!==E&&Sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let T=Object.assign(Object.assign({},f),{host:E,ssl:u,emulatorOptions:s});if(!br(T,I)&&(r._setSettings(T),s.mockUserToken)){let S,O;if(typeof s.mockUserToken=="string")S=s.mockUserToken,O=j.MOCK_USER;else{S=$s(s.mockUserToken,(a=r._app)===null||a===void 0?void 0:a.options.projectId);let b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new R(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new j(b)}r._authCredentials=new Jr(new Ln(S,O))}}var hi=class r{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new r(this.firestore,e,this._query)}},We=class r{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new r(this.firestore,e,this._key)}toJSON(){return{type:r._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Gt(n,r._jsonSchema))return new r(e,s||null,new _e(ge.fromString(n.referencePath)))}};We._jsonSchemaVersion="firestore/documentReference/1.0",We._jsonSchema={type:U("string",We._jsonSchemaVersion),referencePath:U("string")};var di=class r extends hi{constructor(e,n,s){super(e,n,Zl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new _e(e))}withConverter(e){return new r(this.firestore,e,this._path)}};var ea="AsyncQueue",zn=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ui(this,"async_queue_retry"),this.oc=()=>{let s=Qr();s&&ae(ea,"Visibility state changed to "+s.visibilityState),this.F_.y_()},this._c=e;let n=Qr();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=Qr();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new ze;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return A(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!xl(e))throw e;ae(ea,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(s=>{throw this.tc=s,this.nc=!1,ra("INTERNAL UNHANDLED ERROR: ",ta(s)),s}).then(s=>(this.nc=!1,s))));return this._c=n,n}enqueueAfterDelay(e,n,s){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let a=li.createAndSchedule(this,e,n,s,u=>this.lc(u));return this.ec.push(a),a}ac(){this.tc&&X(47125,{hc:ta(this.tc)})}verifyOperationInProgress(){}Pc(){return A(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function ta(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}var fi=class extends $n{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new zn,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return A(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new zn(e),this._firestoreClient=void 0,yield e}})}};function Aa(r,e){let n=typeof r=="object"?r:et(),s=typeof r=="string"?r:e||oi,a=gn(n,"firestore").getImmediate({identifier:s});if(!a._initialized){let u=Bs("firestore");u&&wa(a,...u)}return a}var Bt=class r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new r(Pe.fromBase64String(e))}catch(n){throw new R(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new r(Pe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gt(e,r._jsonSchema))return r.fromBase64String(e.bytes)}};Bt._jsonSchemaVersion="firestore/bytes/1.0",Bt._jsonSchema={type:U("string",Bt._jsonSchemaVersion),bytes:U("string")};var Wn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new R(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ri(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var jt=class r{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new R(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new R(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:r._jsonSchemaVersion}}static fromJSON(e){if(Gt(e,r._jsonSchema))return new r(e.latitude,e.longitude)}};jt._jsonSchemaVersion="firestore/geoPoint/1.0",jt._jsonSchema={type:U("string",jt._jsonSchemaVersion),latitude:U("number"),longitude:U("number")};var $t=class r{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==a[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gt(e,r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new r(e.vectorValues);throw new R(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};$t._jsonSchemaVersion="firestore/vectorValue/1.0",$t._jsonSchema={type:U("string",$t._jsonSchemaVersion),vectorValues:U("object")};var nh=new RegExp("[~\\*/\\[\\]]");function rh(r,e,n){if(e.search(nh)>=0)throw na(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Wn(...e.split("."))._internalPath}catch{throw na(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function na(r,e,n,s,a){let u=s&&!s.isEmpty(),f=a!==void 0,I=`Function ${e}() called with invalid data`;n&&(I+=" (via `toFirestore()`)"),I+=". ";let E="";return(u||f)&&(E+=" (found",u&&(E+=` in field ${s}`),f&&(E+=` in document ${a}`),E+=")"),new R(k.INVALID_ARGUMENT,I+r+E)}var Gn=class{constructor(e,n,s,a,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new pi(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Sa("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},pi=class extends Gn{data(){return super.data()}};function Sa(r,e){return typeof e=="string"?rh(r,e):e instanceof Wn?e._internalPath:e._delegate._internalPath}var st=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ot=class r extends Gn{constructor(e,n,s,a,u,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new at(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let s=this._document.data.field(Sa("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new R(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ot._jsonSchemaVersion="firestore/documentSnapshot/1.0",ot._jsonSchema={type:U("string",ot._jsonSchemaVersion),bundleSource:U("string","DocumentSnapshot"),bundleName:U("string"),bundle:U("string")};var at=class extends ot{data(e={}){return super.data(e)}},zt=class r{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new st(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new at(this._firestore,this._userDataWriter,s.key,s,new st(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new R(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,u){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map(I=>{let E=new at(a._firestore,a._userDataWriter,I.doc.key,I.doc,new st(a._snapshot.mutatedKeys.has(I.doc.key),a._snapshot.fromCache),a.query.converter);return I.doc,{type:"added",doc:E,oldIndex:-1,newIndex:f++}})}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(I=>u||I.type!==3).map(I=>{let E=new at(a._firestore,a._userDataWriter,I.doc.key,I.doc,new st(a._snapshot.mutatedKeys.has(I.doc.key),a._snapshot.fromCache),a.query.converter),T=-1,S=-1;return I.type!==0&&(T=f.indexOf(I.doc.key),f=f.delete(I.doc.key)),I.type!==1&&(f=f.add(I.doc),S=f.indexOf(I.doc.key)),{type:ih(I.type),doc:E,oldIndex:T,newIndex:S}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new R(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ni.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],s=[],a=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),a.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function ih(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:r})}}zt._jsonSchemaVersion="firestore/querySnapshot/1.0",zt._jsonSchema={type:U("string",zt._jsonSchemaVersion),bundleSource:U("string","QuerySnapshot"),bundleName:U("string"),bundle:U("string")};(function(e,n=!0){(function(a){Wt=a})(Ze),Se(new Ae("firestore",(s,{instanceIdentifier:a,options:u})=>{let f=s.getProvider("app").getImmediate(),I=new fi(new Xr(s.getProvider("auth-internal")),new ti(f,s.getProvider("app-check-internal")),(function(T,S){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new R(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ai(T.options.projectId,S)})(f,a),f);return u=Object.assign({useFetchStreams:n},u),I._setSettings(u),I},"PUBLIC").setMultipleInstances(!0)),H($o,zo,e),H($o,zo,"esm2017")})();var Kt=class{constructor(e){return e}},ba="firestore",gi=class{constructor(){return nt(ba)}};var _i=new dn("angularfire2.firestore-instances");function sh(r,e){let n=In(ba,r,e);return n&&new Kt(n)}function oh(r){return(e,n)=>{let s=e.runOutsideAngular(()=>r(n));return new Kt(s)}}var ah={provide:gi,deps:[[new Te,_i]]},ch={provide:Kt,useFactory:sh,deps:[[new Te,_i],Ue]};function Ra(r,...e){return H("angularfire",Me.full,"fst"),fn([ch,ah,{provide:_i,useFactory:oh(r),multi:!0,deps:[we,Ye,Fe,Dt,[new Te,On],[new Te,En],...e]}])}var Pa=rt(Aa,!0);var ka=[{path:"home",loadComponent:()=>import("./chunk-O333HZUP.js").then(r=>r.HomePage)},{path:"",redirectTo:"home",pathMatch:"full"}];var Ca=(()=>{let e=class e{constructor(){this.themeService=te(Xs),this.firebaseConfigService=te(Js),this.logDebug("App component initialized")}ngOnInit(){this.initializeServices()}initializeServices(){try{this.logDebug("Core services initialized successfully")}catch(s){this.logError("Failed to initialize core services",s)}}logDebug(s){console.log(`[AppComponent] ${s}`)}logError(s,a){console.error(`[AppComponent] ${s}:`,a)}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=bs({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(a,u){a&1&&(Rs(0,"ion-app"),ks(1,"ion-router-outlet"),Ps())},dependencies:[Ms,Ls],encapsulation:2});let r=e;return r})();Cs(Ca,{providers:[{provide:Ns,useClass:xs},Fs(),Os(ka,Vs(Ds)),no(()=>ro(Ys.firebase)),Ra(()=>Pa())]}).catch(r=>{});
